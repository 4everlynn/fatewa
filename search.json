[{"categories":["java"],"content":"Fatewa Spring Cli Release log Easy to build Strongerrestful API Now at version 1.0.10    Features  Service Component  Service Component æˆ‘ä»¬å·²ç»çŸ¥é“åœ¨Spirng Clié¡¹ç›®ä¸­ï¼Œé€šè¿‡@Exportæ³¨è§£å¯ä»¥å¿«é€Ÿç”ŸæˆRestfulé£æ ¼çš„æ¥å£ï¼Œå¹¶ä¸”åœ¨ V1.0.5ç‰ˆæœ¬ä¸­å¼•å…¥äº†GeniusHooksæ¥æ‰©å±•æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ã€‚\ngraph TB; r(Request\u003cT\u003e) c(Create Entity) u(Update Entity) d(Delete Entity) e(End) r --post-- hooks.beforeCreate -- c -- hooks.created -- e r --patch-- hooks.beforeUpdate -- u -- hooks.updated -- e r --delete-- hooks.beforeDelete -- d -- hooks.deleted -- e  ä¸Šå›¾ä¸ºGeniusHookså‘¨æœŸ éšç€æ—¥å¸¸çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å‘ç°ç”¨æˆ·åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œä½¿ç”¨kernelæ—¶éœ€è¦å¯¹äºæŸäº›ç±»å‹è¿›è¡Œæ ¼å¼åŒ–å¤„ç†ã€‚è€ƒè™‘åˆ°è¿™ç‚¹ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬æˆ‘ä»¬å¢åŠ äº†å…³äºæ‰©å±•æ’ä»¶çš„å¤–éƒ¨é…ç½®SpeardPluginã€‚\nSpreadPluginä¼šå¯¹è¯·æ±‚å‚æ•°è¿›è¡Œå¿…è¦çš„æ ¼å¼åŒ–åï¼Œå†äº¤ç”±åç»­æ­¥éª¤æ‰§è¡Œã€‚\ngraph TB; s(SpreadPlugin) r(Request\u003cT\u003e) e(End) s -- r r --post--- PostProcessing... --- e r --patch--- PatchProcessing... --- e r --get--- GetProcessing... --- e  SpreadPluginæä¾›äº†ä¸¤ç§æ–¹å¼è¿›è¡Œæ’ä»¶çš„æ‰©å±•\n1 2 3 4 5 6  // å…¨å±€æ‰©å±• SpreadPlugin.spread(TypePlugin\u003c?,?\u003e plus); // æŒ‡å®šç±»å‹æ‰©å±• SpreadPlugin.assignSpread(Class\u003c?\u003e aClass,TypePlugin\u003c?,?\u003e plus);   åœ¨é¡¹ç›®åŠ è½½å‰ï¼Œåœ¨ä½ çš„é…ç½®ä¸­å®ä¾‹SpreadPluginï¼Œå¦‚æœä½ éœ€è¦å¤šä¸ªæ’ä»¶å»å·¥ä½œï¼Œä½ åªéœ€è¦å¤šæ¬¡é“¾å¼æ‰ç”¨spread()æ–¹æ³•å³å¯\nç®€å•çš„ä½¿ç”¨\n1 2 3 4 5 6 7  @Bean SpreadPlugin spreadPlugin(){ return new SpreadPlugin() .spread((TypePlugin\u003cString, Integer\u003e) item -\u003e Integer.valueof(item)) .spread((TypePlugin\u003cString, Date\u003e) item -\u003e yourParseDateFoncation(item)); }   å¯¹äºä¸€äº›ç®€å•çš„ç±»å‹å¤„ç†ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦ä¸€å¥lamdaã€‚\nå½“ç„¶ï¼Œåœ¨è¿™é‡Œä½ ä¹Ÿå¯ä»¥å»è¿›è¡Œä¸€äº›å¤æ‚ç±»å‹çš„è½¬åŒ–ï¼Œæ¯”å¦‚å¯¹äºæ—¶é—´çš„è½¬åŒ–æˆ–æ˜¯åœ¨ä½¿ç”¨MybatisPlusæ—¶å¯¹äºé€šç”¨æšä¸¾çš„è½¬åŒ–ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  @Bean SpreadPlugin spreadPlugin(){ return new SpreadPlugin() // å…¨å±€æ’ä»¶æ‰©å±•  .spread(new TypePlugin\u003cString, Date\u003e() { @Override public Date doTrans(String s) { // ä½ çš„æ–¹æ³•  } }) // æŒ‡å®šç±»æ’ä»¶æ‰©å±•  .assignSpread(MyBean.class, (TypePlugin\u003cString, MyBeanEnum\u003e) s -\u003e { // ä½ çš„æ–¹æ³•  }); }   ","description":"","tags":["Spring cli"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/tags/spring-cli/1.0.10/"},{"categories":["java"],"content":"Fatewa Spring Cli Release log Easy to build Strongerrestful API Now at version 1.0.8    Features  Service Component  Service Component éšç€æˆ‘ä»¬çš„æœåŠ¡æ•°é‡å¢åŠ ï¼Œå¯»æ‰¾æœåŠ¡çš„é…ç½®æ–‡æ¡£ä¹Ÿæˆä¸ºäº†ä¸€é¡¹å¤æ‚çš„å·¥ä½œï¼Œ è€ƒè™‘åˆ°è¿™ç‚¹ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº†æœåŠ¡ç»„ä»¶çš„åˆå§‹åŒ–\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ ¹æ®æç¤ºè¿›è¡Œå‚æ•°è¾“å…¥å³å¯\n","description":"","tags":["Spring cli"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/tags/spring-cli/1.0.8/"},{"categories":["java"],"content":"Kernel feature draft 1.0.7 è®¾è®¡ç›®æ ‡  å‡å°‘ PO çš„åŠŸèƒ½è´Ÿæ‹… ä½¿è¿”å›å±‚æ›´åŠ çµæ´»æ€§ Git commit è§„çº¦  ProtocolVO é’ˆå¯¹æ­¤å‰ kernel è®¾è®¡çš„ domain driven ä¸­å­˜åœ¨ PO åŠŸèƒ½è´Ÿæ‹…è¿‡é‡çš„é—®é¢˜ï¼Œä¸º PO åˆç†åˆ’åˆ†èŒè´£å¹¶æä¾›å‘ä¸‹å…¼å®¹çš„è¯­æ³•ã€‚\næµç¨‹è®¾è®¡ graph LR; ctl(Controller) po(PO) vo(ProtocolVO) st(Strategy) resp(Protocol Response) ctl--po-.optional.-vo--st--resp po--st  æ¥å£ 1 2 3 4 5 6 7 8 9 10 11  public interface ProtocolVO\u003cT extends AncestorDomain\u003e { /** * è¾“å…¥ä¸€ä¸ªPOç±»å‹è¿”å›ä¸€ä¸ªè¾“å‡ºçš„åè®®ç±»å‹ * * @param domain é¢†åŸŸæ¨¡å‹ * @return è¾“å‡ºçš„åè®®ç±»å‹ï¼ˆVOï¼‰ */ ProtocolVO\u003cT\u003e translate(T domain); }   ä»£ç ç¤ºä¾‹ PO 1 2 3 4 5  @Data public class User extends AncestorDomain{ private String name; private int age; }   Controller 1 2 3 4 5 6 7 8 9 10 11  @RestController @RequestMapping(\"/v1/users\") public class UserController { public User user () { return new User() .setAge(14) .setName(\"Edward Jobs\") } }   VO 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  @Data // éœ€è¦æ·»åŠ  @Component æ³¨å†Œå…¥ Spring å®¹å™¨ @Component public class UserVO implements ProtocolVO\u003cUser\u003e { private String n; @Override public ProtocolVO\u003cUser\u003e translate(User domain) { // new ä¸€ä¸ª VOï¼ˆæ³¨æ„ä¸è¦è¿”å›è‡ªèº«ï¼‰  ProtocolVO\u003cUser\u003e vo = new ProtocolVO\u003c\u003e(); // name -\u003e n  vo.setN(domain.getName()); return vo; } }   æœ€ç»ˆæ¥å£è¿”å›çš„ response ä¸º(å¦‚æœæ²¡æœ‰é…ç½® VO åˆ™è¿˜æ˜¯æŒ‰ç…§åŸå§‹ç»“æ„è¿”å›)\n1 2 3 4 5 6 7  { code: \"E0001\", msg: \"è¯·æ±‚æˆåŠŸ\", data: { n: \"Edward Jobs\" } }   Gitæäº¤è§„èŒƒåŒ– commit messge è§„èŒƒååˆ†æœ‰åŠ©äºé¡¹ç›®ç®¡ç†, é€šè¿‡ msg å¯ä»¥åŒºåˆ†å‡ºæäº¤çš„ä¸»é¢˜\n\u003ctype\u003e: \u003cmsg\u003e\nfeat: æ–°ç‰¹æ€§\nfix: ä¿®æ”¹é—®é¢˜\nrefactor: ä»£ç é‡æ„\ndocs: æ–‡æ¡£ä¿®æ”¹\nstyle: ä»£ç æ ¼å¼ä¿®æ”¹\ntest: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹\nchore: å…¶ä»–ä¿®æ”¹ï¼Œæ¯”å¦‚æ„å»ºæµç¨‹ï¼Œä¾èµ–ç®¡ç†\nscope: commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚: mapperã€controllerã€service\nsubject: commitçš„æ¦‚è¿°\nfooter: å¤‡æ³¨\nå¦‚æœè‰æ¡ˆé€šè¿‡ï¼Œå°†ä¼šé€šè¿‡ git hooks çš„å½¢å¼æ¥çº¦æŸæ¯æ¬¡æäº¤çš„æ¶ˆæ¯æ ¼å¼\n","description":"","tags":["Spring cli","draft"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/kfd/"},{"categories":["javascript"],"content":"Fatewa Kinnara Release log Now at version 1.0.5     Kinnara Install Quick Start æ“ä½œæŒ‡ä»¤  åŸºç¡€ä»£ç  Join head replace seq map observe   è‡ªå®šä¹‰æ“ä½œå‘½ä»¤ Kinnara ä¸­çš„è§‚å¯Ÿè€…  å–æ¶ˆè®¢é˜… æœ‰ä»€ä¹ˆç”¨ ?    Kinnara  Kinnara æ˜¯ä¸ºäº†è§£å†³å‰ç«¯åº”ç”¨ä¸­æ¥å£è·¯å¾„éš¾ç®¡ç†ã€ä»£ç é‡å¤ç‡é«˜ç­‰é—®é¢˜è€Œå®ç°çš„åŸºäº JSProxy çš„è½»é‡çº§è§£å†³æ–¹æ¡ˆ\n Install ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬å³å¯\n1  npm i @fatewa/kinnara   Quick Start 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  // å®šä¹‰æ¥å£è·¯å¾„å¯¹è±¡ const routes = { v1: { users: '/v1/users', favorites: '/v1/favorites' } } // å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ const kinnara = new Kinnara() const _: any = kinnara // è®¾ç½®ä¸€ä¸ª http è¯·æ±‚é€‚é…å™¨  // kinnara æä¾›äº†ä¸€ä¸ª axios çš„é€‚é…å™¨  // æ„é€ å™¨ä¼ é€’çš„å‚æ•°ä¸º AxiosInstance  .setHttpAdapter(new AxiosHttpAdapter(axios)) // å¹¶è¿”å›ä»£ç†å¯¹è±¡  .proxy(routes) (async () =\u003e { // ç›´æ¥ä½¿ç”¨å¯¹è±¡ key è·¯å¾„å¯¹æ¥å£è¿›è¡Œè¯·æ±‚  const response = await _.v1.users.get() })()   ç›´æ¥é‡ç”¨è·¯ç”±ç»“æ„ï¼Œç›´æ¥è¯·æ±‚æ¥å£, æ”¯æŒ è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œé»˜è®¤æä¾›ä¸€å¥—æ“ä½œæŒ‡ä»¤, ä½¿ç”¨ Kinnaraï¼ŒAPIè·¯å¾„éš¾ä»¥ç®¡ç†å³å°†æˆä¸ºè¿‡å»ã€‚\næ“ä½œæŒ‡ä»¤ æˆ‘ä»¬åœ¨è·¯å¾„ä¸­å£°æ˜çš„URIé€šå¸¸å¾ˆéš¾æ»¡è¶³æ‰€æœ‰æƒ…å†µï¼Œ æˆ‘ä»¬æ— æ³•é¿å… URI çš„è°ƒæ•´ å› æ­¤ï¼ŒKinnara æä¾›äº†ä¸€ä¸ªé€šç”¨çš„ã€å¯æ‰©å±•çš„å‘½ä»¤æ¥å£ï¼Œé€šè¿‡è¿™äº›å‘½ä»¤å¯ä»¥è½»æ¾åœ°æ“ä½œURLã€Headers å’Œ å…¶ä»–å±æ€§ã€‚\nåŸºç¡€ä»£ç  ä¸‹æ–‡ä¸­çš„å‘½ä»¤ä»‹ç»ä»£ç éƒ½æœ‰è¿™ä¸€æ®µé€šç”¨çš„ä»£ç ï¼Œ åœ¨æ­¤å£°æ˜åä¸‹æ–‡ä»‹ç»å‘½ä»¤æ—¶ä¸å†é‡å¤ç¼–å†™\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  const kinnara = new Kinnara() // å®šä¹‰æ¥å£è·¯å¾„å¯¹è±¡ const routes = { v1: { users: { root: '/v1/users', single: '/v1/users/{id}' } favorites: '/v1/favorites', } // å¾—åˆ°ä»£ç†å¯¹è±¡ const _: any = kinnara .setHttpAdapter(new AxiosHttpAdapter(axios)) .proxy(routing)   Join åœ¨ URL çš„å³è¾¹åŠ¨æ€åœ°æ·»åŠ å­—ç¬¦ä¸²\n1 2 3 4 5 6  // åŠ¨æ€å¾—åˆ°çš„å‚æ•°å€¼ const configId = 1 const response = _.v1.users.root .join`/${configId}` .get()   å¾—åˆ°çš„ URI ä¸º /v1/users/1\nhead ä¸ºå•æ¬¡è¯·æ±‚æ·»åŠ è¯·æ±‚å¤´\n1 2 3 4 5 6  const response = _.v1.users.root .head({ ContentType:'application/json', Origin: 'https://xxx' }) .get()   replace æ›¿æ¢ URI ä¸­çš„å ä½ç¬¦\n1 2 3  const response = _.v1.users.single .replace({ id: 1 }) .get()   å¾—åˆ°çš„ URI ä¸º /v1/users/1\nseq æŒ‡ä»¤åºåˆ—ï¼Œå¯ä»¥èšåˆå¤šä¸ªæŒ‡ä»¤æ‰§è¡Œï¼Œ ç”¨äºæ„å»ºå¤æ‚çš„ URI æ“ä½œ\n1 2 3 4 5 6 7 8  const response = _.v1.users.single .seq((chain) =\u003e { // chain provides all the instructions for the Kinnara library  chain.replace({ id: 1 }) chain.join`/issues` chain.head({ ContentType:'application/json' }) }) .get()   å¾—åˆ°çš„ URI ä¸º /v1/users/1/issues, å¹¶ä¸”è¯·æ±‚æ—¶ä¼šé™„åŠ  ContentType: application/json \nmap æ“ä½œåŸå§‹è¯·æ±‚å¯¹è±¡ï¼Œå¹¶è¿›è¡Œæ˜ å°„ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥å¤„ç†ä»»æ„å¤æ‚è¯·æ±‚ï¼Œ å¦‚æœç›®å‰ Kinnara æ‰€æä¾›çš„å‘½ä»¤æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ map\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  // APIå‚æ•°ä»¥æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œ const resposne = _.v1.users.single .map((it: RequestWrapper) =\u003e { // è°ƒæ•´è¯·æ±‚url  url: '/users', // è°ƒæ•´è¯·æ±‚å¤´  headers: {}, // è°ƒæ•´æŸ¥è¯¢å‚æ•°  query: {}, // è°ƒæ•´ body å‚æ•°  body: {} // è°ƒæ•´æ˜¯å¦å¯è¢«è§‚å¯Ÿ(è¯¦æƒ…è§ä¸‹æ–‡)  observable: true }) .get() // æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç›´æ¥å°† map ä¸­è¦è¿”å›çš„å¯¹è±¡ä½œä¸º get çš„å‚æ•°ä¼ å…¥ const resposne = _.v1.users.single .get({ // è°ƒæ•´è¯·æ±‚url  url: '/users', // è°ƒæ•´è¯·æ±‚å¤´  headers: {}, // è°ƒæ•´æŸ¥è¯¢å‚æ•°  query: {}, // è°ƒæ•´ body å‚æ•°  body: {} // è°ƒæ•´æ˜¯å¦å¯è¢«è§‚å¯Ÿ(è¯¦æƒ…è§ä¸‹æ–‡)  observable: true })   ä¸¤ç§æ–¹å¼ä»»é€‰å…¶ä¸€å³å¯\nobserve æ§åˆ¶å½“å‰è¯·æ±‚æ˜¯å¦å¯è¢«è§‚å¯Ÿ(è§ä¸‹æ–‡)\n1 2 3 4  _.v1.users.root // è®¾ç½®æœ¬æ¬¡è¯·æ±‚ä¸ºç¦æ­¢è§‚å¯Ÿ  .observe(false) .get()   è‡ªå®šä¹‰æ“ä½œå‘½ä»¤ å¦‚æœä¸Šæ–‡ä¸­æ‰€æåˆ°çš„å‘½ä»¤éƒ½æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰å‘½ä»¤ï¼Œ æˆ‘ä»¬ä»¥å®ç° random å‘½ä»¤ä¸ºä¾‹ï¼Œ random çš„ä½œç”¨ä¸ºï¼Œåœ¨ URI å³è¾¹æ·»åŠ ä¸€ä¸ªéšæœºçš„æ•´æ•°\nè‡ªå®šä¹‰æŒ‡ä»¤çš„æœ¬è´¨å…¶å®æ˜¯å¯¹ RequestWrapper å¯¹è±¡çš„æ„å»º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  export default class RandomCommand implements Command { /** * å½“å‰å·²ç»å¤„ç†å®Œæ¯•çš„ç»“æ„ */ wrapper!: RequestWrapper /** * å‘½ä»¤çš„å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾å®šä¸€ä¸ªç³»æ•° */ entrypoint (coefficient: number): RequestWrapper { return { url: `${this.wrapper.url}/${Math.random() * coefficient | 0}` } } /** * å‘½ä»¤åœ¨è°ƒç”¨æ—¶çš„åç§° */ name (): string { return 'random' } }   ä½¿ç”¨\n1 2 3 4 5  // è£…è½½å‘½ä»¤ Kinnara.use(RandomCommand) // ä½¿ç”¨è‡ªå®šä¹‰å‘½ä»¤ _.v1.users.root.random(100).get()   Kinnara ä¸­çš„è§‚å¯Ÿè€… åœ¨ URL å¤„äºè¯·æ±‚çŠ¶æ€æ—¶æä¾›è®¢é˜…åŠŸèƒ½ï¼Œå› æ­¤æ‚¨å¯ä»¥æ‹¦æˆªæˆ–æ‰§è¡Œä¸€äº›é¢å¤–çš„å“åº”å¤„ç†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // ç›‘å¬ä¸€ä¸ªæ¥å£çš„è¯·æ±‚ // ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹ä¸º RegExp ï½œ string // å½“è·¯å¾„ä¸­å­˜åœ¨å ä½ç¬¦æ—¶ï¼Œ // Kinnara ä¼šè‡ªåŠ¨å°† å½¢å¦‚ {any} çš„å ä½ç¬¦æ›¿æ¢ä¸º [\\w-]+? å¹¶å°†å­—ç¬¦ä¸²è½¬ä¸ºæ­£åˆ™ kinnara.subscribe(routes.v1.users.single, (request, response) =\u003e { // ... Do anything you want  return { ...response, ext: 'è¿™æ˜¯åœ¨è®¢é˜…ä¸­æ–°å¢çš„å­—æ®µâ€˜ } }) // After the listener _.v1.users.single.replace({ id: 1 }).get((response) =\u003e { // ç”±äºè®¢é˜…æ—¶æ–°å¢äº†æ­¤å­—æ®µï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œå¯ä»¥è·å–åˆ°  const { ext } = response })   å¦‚æœåœ¨è®¢é˜…ä¸­éœ€è¦å†æ¬¡è°ƒç”¨è¢«è®¢é˜…çš„ APIï¼Œä¸ºäº†é˜²æ­¢æ ˆæº¢å‡ºï¼Œéœ€åœ¨è®¢é˜…çš„å¤„ç†å™¨ä¸­ ç¦ç”¨è§‚å¯Ÿ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  kinnara.subscribe(routes.v1.users.single, (request, response) =\u003e { _.v1.users.single.seq(chain =\u003e { chain.replace({ id: 1 }) // æ ‡è®°ç¦ç”¨è§‚å¯Ÿï¼Œé¿å…æ ˆæº¢å‡º  chain.observe(false) }).get() return { ...response, ext: 'è¿™æ˜¯åœ¨è®¢é˜…ä¸­æ–°å¢çš„å­—æ®µâ€˜ } }) _.v1.users.single.replace({ id: 1 }).get((response) =\u003e { // ç”±äºè®¢é˜…æ—¶æ–°å¢äº†æ­¤å­—æ®µï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œå¯ä»¥è·å–åˆ°  const { ext } = response })   å–æ¶ˆè®¢é˜… è°ƒç”¨ subscribe æ–¹æ³•åï¼Œä¼šå¾—åˆ°ä¸€ä¸ª keyï¼Œ å–æ¶ˆå°±æ˜¯é€šè¿‡è¿™ä¸ª key\n1 2 3 4  const key = kinnara.subscribe(any, any) // å–æ¶ˆè®¢é˜… kinnara.cancel(key)   æœ‰ä»€ä¹ˆç”¨ ? æœ‰äº†é’ˆå¯¹å•ä¸ªè·¯å¾„çš„è§‚å¯Ÿæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°ä¸€æ¡å®Œæ•´çš„è¯·æ±‚é“¾è·¯, å¹¶ä¸”è¿™ä¸ªé“¾è·¯æ˜¯å…¨å±€æœ‰æ•ˆçš„\næˆ‘ä»¬å‡è®¾ç°åœ¨æ‹¿åˆ°äº†ä¸€ä¸ªè¿™æ ·çš„æ¥å£æ–‡æ¡£\nè·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è§’è‰²é›†åˆ /v1/users/roles\nResponse\n1 2 3  code: 200, // è§’è‰² ID data: [1, 2, 3, 4]   æ ¹æ®è§’è‰²IDè·å–è§’è‰²è¯¦æƒ… /v1/roles/{id}\nResponse\n1 2 3 4 5 6  code: 200, // è§’è‰² ID data: { name: 'ç®¡ç†å‘˜', code: 'admin' }   å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸¤ä¸ªæ¥å£å°±æ˜¯å­˜åœ¨é“¾è·¯å…³ç³»çš„, æˆ‘ä»¬ä½¿ç”¨ kinnara å¯¹æ¥è¿™ä¸¤ä¸ªæ¥å£\næˆ‘ä»¬æ¨èä»¥ä¸‹çš„æ–‡ä»¶å¤¹ç»„ç»‡ç»“æ„è¿›è¡Œç®¡ç†\nä½¿ç”¨ index è¿›è¡Œå¯¼å‡º, å„ä¸ªæ¨¡å—çš„æ¥å£ æ”¾ç½®åœ¨å„è‡ªçš„æ–‡ä»¶å¤¹ä¸­è¿›è¡Œç»´æŠ¤ project â”œâ”€â”€ api â”‚ â”œâ”€â”€ user â”‚ â”‚ â”œâ”€â”€ index.ts â”‚ â”œâ”€â”€ biz â”‚ â”‚ â”œâ”€â”€ index.ts â”‚ â””â”€â”€ index.ts user/index.ts\n1 2 3 4 5 6  export default { users: { root: '/users', roles: '/users/roles' } }   roles/index.ts\n1 2 3 4 5 6  export default { roles: { root: 'roles', single: '/roles/{id}' } }   index.ts\n1 2 3 4 5 6 7 8 9  import users from './users' import roles from './roles' export default { // å¤–å±‚ç»„ç»‡ API ç‰ˆæœ¬å·  v1: { users, roles } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  import routes from '@/api' const kinnara = new Kinnara() // å¾—åˆ°ä»£ç†å¯¹è±¡ const _: any = kinnara .setHttpAdapter(new AxiosHttpAdapter(axios)) .proxy(routing) // è®¢é˜…è¯·æ±‚ç”¨æˆ·è§’è‰²çš„æ¥å£ kinnara.subscribe(routes.v1.users.roles, async (request, response) =\u003e { const { data } = response const roles = [] for (const id of data) { const role = await _.v1.roles.single.seq(chain =\u003e { chain.replace({ id }) chain.observe(false) }).get() roles.push(roles) } return { ...response, // ä¿ç•™åŸå§‹è¯·æ±‚ç»“æ„ï¼Œå¤å†™ data å±æ€§  data: roles } })   è°ƒç”¨\n1 2 3 4 5  _.v1.users.roles.get() // å¾—åˆ°çš„ç»“æœ -\u003e [{ ...roleï¼ˆå®Œæ•´çš„ Role å¯¹è±¡ï¼‰ }]    å½“ç„¶è¿™æ ·çš„è¯·æ±‚æ–¹å¼ï¼Œæ˜¾ç„¶æ˜¯ä¸å¤Ÿåˆç†çš„ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´ Qps è¿‡é«˜ï¼Œ æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹è¯·æ±‚çš„ç»“æœè¿›è¡Œç¼“å­˜ï¼ˆå¦‚æœåº”ç”¨æ˜¯é¢å‘ C ç«¯çš„ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼ä»æ—§ä¸åˆç†ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  // ç¼“å­˜è¯·æ±‚åˆ°çš„ç»“æœ const cache = { counter: 0, data: null } // è®¢é˜…è¯·æ±‚ç”¨æˆ·è§’è‰²çš„æ¥å£ kinnara.subscribe(routes.v1.users.roles, async (request, response) =\u003e { const { data } = response const roles = [] if (!cache.data) { for (const id of data) { const role = await _.v1.roles.single.seq(chain =\u003e { chain.replace({ id }) chain.observe(false) }).get() roles.push(roles) } cache.data = roles } else { roles = cache.data // ç¼“å­˜çš„æ•°æ®ä¿ç•™ 50 æ¬¡ï¼Œ  // æ¬¡æ•°è¶…è¿‡ 50 åï¼Œåˆ™å†æ¬¡è¯·æ±‚, ä¸€å®šç¨‹åº¦ä¿éšœæ•°æ®çš„å®æ—¶æ€§  if (++cache.counter \u003e 49) { cache.data = null cache.counter = 0 } } return { ...response, // ä¿ç•™åŸå§‹è¯·æ±‚ç»“æ„ï¼Œå¤å†™ data å±æ€§  data: roles } })   ","description":"","tags":["lib"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/tags/kinnara/1.0.5/"},{"categories":["java"],"content":"Fatewa Spring Cli Release log Easy to build Strongerrestful API Now at version 1.0.5    Features  Protocol Exception Genius Hooks Data Scopes ğŸ”¥  Protocol Exception æˆ‘ä»¬å·²ç»çŸ¥é“åœ¨ Spring Cli çš„é¡¹ç›®ä¸­ï¼Œé€šè¿‡ Assert å¯ä»¥è¿”å›é¢„æœŸçš„å¼‚å¸¸ Responseï¼Œ ä½†å®ƒçš„å±€é™ä¹‹å¤„åœ¨äºï¼Œæ— æ³•è°ƒæ•´ Http Status Code, äºæ˜¯ä¸ºäº†è§£å†³æ­¤ç±»é—®é¢˜ï¼Œåœ¨æœ€æ–°(v1.0.5) ç‰ˆæœ¬ä¸­ï¼Œè®¾è®¡äº† ProtocolException, ä¸€èµ·æ¥çœ‹çœ‹å§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  // æ¨¡æ‹Ÿä¸€ä¸ªæ£€æŸ¥è®¢å•çš„æ–¹æ³• public void checkOrder () { // ç”¨æˆ·æœªæˆæƒ  if (!isAuth()) { // è¿”å›æ—¶çš„ Http Status ä¸º 401  throw new ProtocolException( ResponseCode.NO_LOGIN_ERROR, \"ç”¨æˆ·æœªç™»å½•\" ); } // ... ä¸šåŠ¡ä»£ç  }   ResponseCode ä¸ºæšä¸¾ç±»å‹ï¼Œå¯åœ¨ \u003cgroups\u003e.kernel.constants.ResponseCode  ä¸­è¿›è¡Œè‡ªå®šä¹‰æ‰©å±• é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¶ç»“æ„ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  public enum ResponseCode { /** * å‚æ•°è¯´æ˜ */ SUCCESS(\"E0001\", \"è¯·æ±‚æˆåŠŸ\", HttpStatus.OK), ERROR_SERVICE(\"E1001\", \"å¹³å°æœåŠ¡å¼‚å¸¸\", HttpStatus.INTERNAL_SERVER_ERROR), ERROR_DB(\"E1002\", \"æœåŠ¡å™¨æ•°æ®åº“å¼‚å¸¸\", HttpStatus.INTERNAL_SERVER_ERROR), UNIQUE_KEY(\"E1003\", \"å”¯ä¸€å€¼é‡å¤å½•å…¥\", HttpStatus.INTERNAL_SERVER_ERROR), TRANSFORM_ERROR(\"E1004\", \"ç±»å‹è½¬æ¢é”™è¯¯\", HttpStatus.INTERNAL_SERVER_ERROR), ERROR_QUERY(\"E2001\", \"è¯·æ±‚å‚æ•°å¼‚å¸¸ï¼Œç¼ºå°‘å¿…å¡«é¡¹\", HttpStatus.BAD_REQUEST), ERROR_QUERY_FORMAT(\"E2002\", \"è¯·æ±‚å‚æ•°å¼‚å¸¸ï¼Œå‚æ•°æ ¼å¼ä¸åˆæ³•\", HttpStatus.BAD_REQUEST), NO_LOGIN_ERROR(\"E4001\", \"è¯·å…ˆç™»å½•\", HttpStatus.UNAUTHORIZED); /** * å€¼ */ public String value; /** * å¯¹åº”ä¿¡æ¯ */ public String msg; /** * å¯¹åº” Http Status */ public HttpStatus status; }   Genius Hooks åœ¨ä»¥å¾€çš„ Spring cli ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿå€ŸåŠ©äº @Export  æ³¨è§£æ‰€æä¾›çš„èƒ½åŠ›è¿›è¡Œ Level 2 çš„ Restful API è‡ªåŠ¨ç”Ÿæˆï¼Œå¯æ˜¯åœ¨å®é™…çš„ä¸šåŠ¡ç ”å‘ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™äº› ç”Ÿæˆçš„æ¥å£å¾€å¾€ä¸èƒ½å®Œå…¨èƒœä»»ä¸šåŠ¡éœ€æ±‚æˆ–è€…è¯´æ— æ³•è·Ÿéšä¸šåŠ¡è€Œè¿›è¡Œæ‰©å±•ï¼Œå› æ­¤æˆ‘ä»¬çš„ç”¨æˆ·è¿˜æ˜¯é€‰æ‹©è‡ªè¡Œåˆ›å»º å¹¶é‡æ–°å®ç°æ¥å£ï¼Œè€Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œä¸¢å¤±äº† Spring cli ä¸­æ‰€è‡ªå¸¦çš„ validation scope (å³åŒºåˆ† Createã€Update çš„å‚æ•°æ ¡éªŒ)ï¼Œ åœ¨è¿™æ ·çš„å‰æèƒŒæ™¯ä¸‹ï¼ŒGenius Hooks å°±è‡ªç„¶è€Œç„¶çš„å‡ºç°äº†ã€‚\næˆ‘ä»¬å°† Genius Hooks è´¯ç©¿è¿›äº† GeniusProxyWrapper, å®ƒçš„æµç¨‹å¦‚ä¸‹å›¾\ngraph TB; r(Request\u003cT\u003e) c(Create Entity) u(Update Entity) d(Delete Entity) e(End) r --post-- hooks.beforeCreate -- c -- hooks.created -- e r --patch-- hooks.beforeUpdate -- u -- hooks.updated -- e r --delete-- hooks.beforeDelete -- d -- hooks.deleted -- e  ä½¿ç”¨æ¡ˆä¾‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  @Configuration public class KernelConfig { // é…ç½®ä¸º StoreInfo çš„ Hook  @Bean GeniusHooks\u003cStoreInfo\u003e hooks () { return new GeniusHooks\u003cStoreInfo\u003e() { // æ•°æ®åˆ›å»ºå®Œæˆçš„é’©å­  @Override public void created(AncestorDomain domain, boolean s) { // è¿”å›çš„æ˜¯çˆ¶ç±»å‹ï¼Œéœ€è¦å‘ä¸‹è½¬å‹  final StoreInfo storeInfo = (StoreInfo) domain; System.out.println(storeInfo); } }; } }    åœ¨é’©å­å†…æŠ›å‡ºå¼‚å¸¸å¯ä»¥ä¸­æ–­æ¥å£è¿›è¡Œ ä¹Ÿå¯ä»¥ç»“åˆä¸Šæ–‡ä¸­çš„ ProtocolException è¿›è¡Œ HttpStatus æ§åˆ¶\n Data Scopes ä½œä¸ºç°ä»£åŒ–å¼€ç®±å³ç”¨çš„åº”ç”¨æ¡†æ¶ï¼Œæ•°æ®éš”ç¦»æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ï¼Œåœ¨æ­¤å‰ Spring Cli çš„ç»“æ„ä¸­ï¼Œ ç”±äºæ¥å£çš„é«˜åº¦è‡ªåŠ¨åŒ–ï¼Œå¯¼è‡´ç”¨æˆ·å¾ˆéš¾åœ¨ä¸å»è°ƒæ•´æ ¸å¿ƒæºç çš„å‰æä¸‹å»æ§åˆ¶æ•°æ®çš„éš”ç¦»ï¼Œä½†æ˜¯ä¸å¿…æ‹…å¿ƒï¼Œ åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæ­¤æœºåˆ¶å·²è¢«å®ç°ã€‚\nç°æœ‰çš„æ ¸å¿ƒä»£ç ä¸­ï¼Œå·²ç»é›†æˆäº†æ­¤åŠŸèƒ½ï¼Œä½†é»˜è®¤æ˜¯æœªå¼€å¯çš„çŠ¶æ€ï¼Œéœ€è¦å‘ Spring å®¹å™¨ä¸­æ³¨å†Œä¸€ä¸ª ScopedContext ç±»æ‰å¯ä»¥å¼€å¯:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  @Configuration public class KernelConfig { // é…ç½®æƒé™ä¸Šä¸‹æ–‡  @Bean public ScopedContext context(JdbcTemplate template) { return new RequestScopeContext() // Session æœ‰æ•ˆæ€§æ ¡éªŒå™¨  .calibrator((authorization, request) -\u003e false) // JdbcTemplate ä½¿ç”¨é»˜è®¤çš„å³å¯  .jdbcTemplate(template) // æƒé™å­—æ®µå¤„ç†å™¨  .configure(chain -\u003e chain.scope(new ScopedStore())); } }   æƒé™å­—æ®µå¤„ç†å™¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  public class ScopedStore extends BaseScopeHandler\u003cList\u003cStoreInfo\u003e\u003e { // è·å–æ—¶ä½¿ç”¨çš„ key  @Override public String key() { return \"stores\"; } // æ ¹æ®éœ€è¦æ„å»ºSQLï¼Œä» æ“ä½œç¬¦ å¼€å§‹å†™å³å¯ï¼Œ  // å­—æ®µåç§°ä¼šè¿›è¡Œè‡ªåŠ¨æ³¨å…¥  @Override public SqlBuilder\u003cList\u003cStoreInfo\u003e\u003e builder() { return args -\u003e Joiner.on(\"\") .join(\" in \", \"(\", Strings.join(args.stream() .map(StoreInfo::getId) .collect(Collectors.toList()), ','), \")\"); } // ä½¿ç”¨ JdbcTemplate è¿›è¡Œæ•°æ®åº“è®¿é—®  @Override public List\u003cStoreInfo\u003e scopes() { final JdbcTemplate template = template(); return template.query(\"select * from biz.store_info\", BeanPropertyRowMapper.newInstance(StoreInfo.class)); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14  @EqualsAndHashCode(callSuper = true) @TableName(value = \"store_info\", schema = \"biz\") @Data public class StoreInfo extends AncestorDomain { private Long pid; /** * åœ¨å¯¹åº”çš„å®ä½“ç±»å¢åŠ æ³¨è§£ */ @Scoped(value = KernelConfig.ScopedStore.class, key = \"id\") @TableField(exist = false) private String storeId; }   ","description":"","tags":["Spring cli"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/tags/spring-cli/1.0.5/"},{"categories":["java"],"content":"Fatewa Spring Cli Easy to build Strongerrestful API Now at version 1.0.5   Features Quick Start  Brahma Cli  é€‰æ‹©æ¨¡ç‰ˆ é€‰æ‹©æ¨¡ç‰ˆç‰ˆæœ¬ è¾“å…¥é¡¹ç›®æè¿° ç‰¹æ€§é€‰æ‹©(Features)  ç‰¹æ€§ä¸€è§ˆè¡¨   é€‰æ‹©æ•°æ®åº“ç±»å‹   Project  Kernel æ˜¯ä»€ä¹ˆ ? Migration  çŠ¶æ€ åˆ›å»º å‡çº§ å›é€€   MybatisX ä»£ç ç”Ÿæˆ Controller  Response å†™æ³•  é»˜è®¤ç­–ç•¥ å­é”®ç­–ç•¥ å¹³é“ºç­–ç•¥ åŸå§‹ç±»å‹   å‚æ•°åˆæ³•æ€§æ ¡éªŒ   æ–­è¨€ æ¥å£å¯¼å‡ºä¸å¼€æ”¾å­—æ®µæ£€ç´¢  æ¥å£å¯¼å‡º å¼€æ”¾å­—æ®µæ£€ç´¢   FAQ  å¦‚ä½•ä½¿ä¸»é”®åœ¨è¯·æ±‚ç»“æœä¸­è¿›è¡Œå±•ç¤º ç”Ÿæˆçš„ API æ ¼å¼ä¸è¯·æ±‚è§„èŒƒï¼Ÿ å¦‚ä½•è¦†ç›–ç”Ÿæˆçš„ API è·¯å¾„     Maintainer    Features  Response Join point Mybatis Migration Guava Mybatis Plus Auto SQL Builder \u0026 Controller automatic injection Task Scheduling (WIP) Export Simple Excel (WIP)  Quick Start Brahma Cli Spring cli éœ€è¦é€šè¿‡ Brahma Cli è¿›è¡Œäº¤äº’æ¸²æŸ“ï¼Œæ‰€ä»¥éœ€è¦å…ˆè¿›è¡Œå®‰è£…\n1 2  npm --registry https://nexus.wuchuangroup.com/repository/npm-group/ \\ install -g @fatewa/brahma-cli   å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ create æŒ‡ä»¤è¿›è¡Œé¡¹ç›®åˆ›å»º\n1  brahma create app   é€‰æ‹©æ¨¡ç‰ˆ é€‰æ‹©æ¨¡ç‰ˆç‰ˆæœ¬  é€šå¸¸æƒ…å†µä¸‹ï¼Œé€‰æ‹©æœ€æ–°çš„ç‰ˆæœ¬å³å¯\n è¾“å…¥é¡¹ç›®æè¿° åœ¨æ­¤å¤„è¾“å…¥çš„æè¿°ä¼šè¿›å…¥åˆ° pom.xml description æ ‡ç­¾ä¸‹\n æ¥ä¸‹æ¥ä»…éœ€æ ¹æ®æç¤ºè¾“å…¥ç»„ç»‡ä¿¡æ¯(group)ã€ç‰ˆæœ¬ä¿¡æ¯(version) è¿™å‡ é¡¹ éƒ½ä¼šåœ¨ pom.xml ä¸­ç”Ÿæ•ˆ\n ç‰¹æ€§é€‰æ‹©(Features) ç‰¹æ€§ä¸€è§ˆè¡¨    åç§° ä½œç”¨     Mybatis Migration æ·»åŠ  Mybatis Migration åŠŸèƒ½   Mybatis Plus æ·»åŠ  Mybatis Plus ä¾èµ–   Controller DEMO æ·»åŠ  Controller æ ·ä¾‹ä»£ç (Hello World Controller)   Env Config File æ˜¯å¦ç”Ÿæˆ .env æ–‡ä»¶   Dockerfile æ˜¯å¦ç”Ÿæˆ Dockerfile   Gitlab CI æ˜¯å¦ç”Ÿæˆ .gitlab-ci.yml, æ­¤åŠŸèƒ½ç›®å‰ç‰ˆæœ¬æœªå®ç°    é€‰æ‹©æ•°æ®åº“ç±»å‹ åç»­æ­¥éª¤ä¼šæ ¹æ®æ­¤æ­¥éª¤é€‰æ‹©çš„ä¸åŒï¼Œç”Ÿæˆä¸åŒçš„é€‰é¡¹ï¼Œ æ ¸å¿ƒä¸»è¦ä¸ºæ•°æ®åº“çš„ä¸€äº›å‚æ•°\nè‡³æ­¤ï¼Œé¡¹ç›®å·²ç»ç”Ÿæˆå®Œæ¯•ã€‚\nProject Kernel æ˜¯ä»€ä¹ˆ ? Kernel å°è£…äº† spring-cli åŠŸèƒ½é¡¹çš„å†…æ ¸ä»£ç ï¼Œ æä¾›äº† Response ä»£ç†ã€åŠ¨æ€è·¯ç”±æ³¨å†Œç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œ åŒæ—¶å¦‚æœåœ¨é¡¹ç›®ä¸­ä½ å¸Œæœ›ä¿®æ”¹ response ä¸­çš„ code å­—æ®µï¼Œ ä¹Ÿå¯ä»¥åœ¨ kernel / constants / ResponseCode ä¸­è¿›è¡Œè°ƒæ•´\nMigration é¡¹ç›®ä¸­é‡‡ç”¨çš„ Migration æ˜¯ Mybatis Migrationï¼Œ å¦‚æœä½ å¸Œæœ›çœ‹åˆ°è¯¦ç»†çš„æ–‡æ¡£è¯·è®¿é—®å®˜æ–¹æ–‡æ¡£, ä¸ºäº†èƒ½å¤Ÿæœ€å°åŒ–è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨ä¸‹æ–‡ä¸­ç€é‡ä»‹ç»å‡ ä¸ªæŒ‡ä»¤\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æä¾›äº†å¿«æ·è®¿é—® mybatis migration çš„è„šæœ¬ï¼Œä½ å¯ä»¥æ ¹æ® å½“å‰è¿è¡Œçš„æ“ä½œç³»ç»Ÿè¿›è¡Œé€‰æ‹©\n db.sh é€‚ç”¨äº Mac OSX/Linux db.bat é€‚ç”¨äº Windows   æˆ‘ä»¬æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿åœ¨æ•°æ®åº“ä¿¡æ¯è¾“å…¥æ­¥éª¤ä¸­æŒ‡å®šçš„æ•°æ®åº“åç§°ï¼Œå·²ç»è¢«åˆ›å»º\n çŠ¶æ€ Windows:\n1  ./db.bat status   Linux/Mac:\n1  ./db.sh status   pending å³æœ¬åœ°æœ‰ï¼Œæ•°æ®åº“å†…æ²¡æœ‰ï¼Œéœ€è¦è¿›è¡Œå‡çº§\nåˆ›å»º Windows:\n1  ./db.bat new \"create m_user\"   Linux/Mac:\n1  ./db.sh new \"create m_user\"   æ‰§è¡ŒæˆåŠŸåï¼Œä¼šåœ¨ migrate/repository/scripts ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶\nè¾“å…¥å†…å®¹ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  -- // create m_user -- Migration SQL that makes the change goes here. -- è¿™é‡Œå†™åˆ›å»ºçš„è„šæœ¬ create table m_user ( id bigserial not null, name varchar(64), age int ); create unique index table_name_id_uindex on m_user (id); alter table m_user add constraint table_name_pk primary key (id); -- //@UNDO -- SQL to undo the change goes here. -- è¿™é‡Œå†™å›é€€çš„è„šæœ¬ drop table m_user;   å‡çº§ Windows:\n1  ./db.bat up \u003ccount\u003e   Linux/Mac:\n1  ./db.sh up \u003ccount\u003e   \u003ccount\u003e ä¸ºå‡çº§çš„æ•°é‡(å¯ä¸å¡«ï¼Œé»˜è®¤å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„SQL) å›é€€ Windows:\n1  ./db.bat down \u003ccount\u003e   Linux/Mac:\n1  ./db.sh down \u003ccount\u003e   \u003ccount\u003e ä¸ºå›é€€çš„æ•°é‡(å¯ä¸å¡«ï¼Œé»˜è®¤å›é€€ä¸€ä¸ªç‰ˆæœ¬) MybatisX ä»£ç ç”Ÿæˆ åœ¨ Idea ä¸­å®‰è£… MybatisXï¼ˆMybtis Plus å®˜æ–¹æä¾›çš„ä»£ç ç”Ÿæˆå™¨ï¼‰\nä»¥ä¸‹ä¸ºé…ç½®é¡¹é€‰æ‹©æ¡ˆä¾‹\nåœ¨é›†æˆçš„æ•°æ®åº“é¢æ¿ä¸­å³é”®ç‚¹å‡»è¡¨ï¼Œå¹¶é€‰ä¸­ MybatisX-Generator\nController Response å†™æ³• å†…æ ¸ä¸­é»˜è®¤å·²ç»å®ç°äº†å…¨å±€çš„è¿”å›ç»“æœå°è£…ï¼Œä»¥ä¸‹ä¸ºé»˜è®¤çš„è¿”å›æ ¼å¼\n1 2 3 4 5  interface ProtocolResponse { code: string; msg: string; data: any; }   åœ¨ç¼–å†™çš„æ—¶å€™ä½“éªŒå¦‚ä½•å‘¢ï¼Ÿä¸‹é¢åˆ†å››ä¸ªæ­¥éª¤è¿›è¡Œä»‹ç»\né»˜è®¤ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10  // Response ä½¿ç”¨å­é”®ç­–ç•¥ // é»˜è®¤æ”¾ç½®åœ¨ data ä¸‹  @GetMapping public CliQuery query(CliQuery query){ final Integer cycle=query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4 5 6 7 8  { code: 'E0001', msg: 'ok', data: { cycle: null, version: null } }   å­é”®ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10 11 12  /** * Response ä½¿ç”¨å­é”®ç­–ç•¥ * å¹¶å°†æ•°æ®æ”¾ç½®åœ¨ child ä¸‹ */ @GetMapping(\"/keyed\") @Inclusion(value = InclusionStrategy.WITH_KEY, key = \"child\") public CliQuery queryWithKey(CliQuery query) { final Integer cycle = query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4 5 6 7 8  { code: 'E0001', msg: 'ok', child: { cycle: null, version: null } }   å¹³é“ºç­–ç•¥ 1 2 3 4 5 6 7 8 9 10  /** * Response ä½¿ç”¨å¹³é“ºç­–ç•¥ */ @GetMapping(\"tiled\") @Inclusion(InclusionStrategy.TILED) public CliQuery queryTiled(CliQuery query) { final Integer cycle = query.getCycle(); Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4 5 6  { code: 'E0001', msg: 'ok', cycle: null, version: null }   åŸå§‹ç±»å‹ æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨ Controller è¿”å›ä¸åŒäºå…¨å±€ Response çš„æ•°æ®ç»“æ„ æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°å†…æ ¸ä¸­æ”¯æŒçš„è‡ªå®šä¹‰æ¶ˆæ¯ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11  /** * æŒ‰åŸæ ·è¿”å›ä¸è¿›è¡Œå¤„ç† */ @GetMapping(\"original\") @OriginalResponse public CliQuery original(CliQuery query) { final Integer cycle = query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4  { cycle: null, version: null }   å‚æ•°åˆæ³•æ€§æ ¡éªŒ å†…æ ¸ä¸­å¯¹äºå‚æ•°æ ¡éªŒçš„å®ç°æ˜¯åŸºäº jpa-validation-api çš„ æˆ‘ä»¬ä»…ä»‹ç»æœ€å°çš„ç”¨æ³•ï¼Œå¦‚æœä½ æƒ³è¦æ›´åŠ è¯¦ç»†åœ°äº†è§£åº•å±‚ï¼Œé‚£ä¹ˆæˆ‘éå¸¸æ¨èé˜…è¯» è¿™ç¯‡æ–‡ç« \nå‚æ•°æ ¡éªŒæ˜¯åŸºäºå¯¹ Bean çš„æ³¨è§£\n1 2 3 4 5 6 7 8 9 10  @Data public class CliQuery { @NotNull(message = \"æŸ¥è¯¢æ—¶éœ€è¦é™„å¸¦ç‰ˆæœ¬å·\") private String version; @Max(value = 20, message = \"å¾ªç¯æ¬¡æ•°ä¸åº”è¶…è¿‡20\") private Integer cycle; }   Controller\n1 2 3 4 5 6 7 8  // åœ¨æ ¡éªŒå‚æ•°å‰é¢æ·»åŠ æ³¨è§£ @Valid ç›¸å½“äºæ‰“å¼€å¼€å…³  @GetMapping public CliQuery query(@Valid CliQuery query) { final Integer cycle = query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ–­è¨€ ç”±äºå†…æ ¸ä¸­å°è£…äº† Response çš„éƒ¨åˆ†ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨é€»è¾‘åˆ¤æ–­å‡ºé”™æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œ å¹¶å°†å¼‚å¸¸çš„ msg ä½œä¸º response çš„ messageï¼Œ åœ¨å¼€å§‹ä»‹ç»æ–­è¨€ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  /** * æ ¡éªŒè®¢å•æ˜¯å¦æœ‰æ•ˆ */ public validateOrder (String orderNo) { if (Strings.isNullOrEmpty(orderNo)) { throw new OrderNotFoundException(\"è®¢å•ä¸ºç©º\"); } Order order = service.lambdaQueryChain() .eq(Order::getNo, orderNo) .one(); if (null == order) { throw new OrderNotFoundException(\"æ‰¾ä¸åˆ°è®¢å•\"); } // ...  }   å¾ˆæ˜¾ç„¶ï¼Œè¿™å°†å­˜åœ¨å¾ˆå¤š if - throw çš„ä»£ç å—ï¼Œå¯¼è‡´æˆ‘ä»¬ä»£ç å¯è¯»æ€§é™ä½ï¼Œ ä¸ºäº†è§£å†³æ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ–­è¨€(Spring è‡ªå¸¦çš„æ–­è¨€åŒ…)ï¼Œ ä¸‹é¢æ˜¯ä½¿ç”¨æ–­è¨€ä¼˜åŒ–åçš„ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13  /** * æ ¡éªŒè®¢å•æ˜¯å¦æœ‰æ•ˆ */ public validateOrder (String orderNo) { Assert.state(Strings.isNullOrEmpty(orderNo), \"è®¢å•ä¸ºç©º\") Order order = service.lambdaQueryChain() .eq(Order::getNo, orderNo) .one(); Assert.notNull(order, \"æ‰¾ä¸åˆ°è®¢å•\") // ... }   æ¥å£å¯¼å‡ºä¸å¼€æ”¾å­—æ®µæ£€ç´¢ æ¥å£å¯¼å‡º å†…æ ¸æä¾›äº†è‡ªåŠ¨æ³¨å†Œ restful api çš„åŠŸèƒ½ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥è¾ƒä¸ºè½»æ¾åœ° å®ç° L2 çº§åˆ«çš„ restful api\n1 2 3 4 5 6 7  /** * äº§å“ Service * @author 4everlynn */ @Export(path = \"products\", create = true) public interface ProductService extends IService\u003cProduct\u003e {s }   æ ¸å¿ƒåœ¨äºï¼Œåœ¨ service å±‚çš„æ¥å£ä¸Šæ·»åŠ æ³¨è§£ @Export, æ­¤æ³¨è§£æœ‰å¤šä¸ªå‚æ•°ï¼Œ å…¶é‡Šä¹‰å¦‚ä¸‹\n   å‚æ•° ç±»å‹ å¤‡æ³¨ Default     path String ç”Ÿæˆæ¥å£çš„åŸºç¡€è·¯å¾„ -   create Boolean å¼€æ”¾ POST æ¥å£(åˆ›å»º) false   update Boolean å¼€æ”¾ PATCH æ¥å£(æ›´æ–°) false   delete Boolean å¼€æ”¾ DELETE æ¥å£(åˆ é™¤) false   page Boolean å¼€æ”¾åˆ†é¡µæŸ¥è¯¢æ¥å£ true   getFromId Boolean å¼€æ”¾å•ä¸ªå¯¹è±¡(æ ¹æ® ID)æŸ¥è¯¢æ¥å£ true    æ³¨è§£æ·»åŠ æˆåŠŸåå¯åŠ¨é¡¹ç›®ï¼Œæ—¥å¿—ä¸­ä¼šæ‰“å°æ³¨å†Œçš„è·¯å¾„\nå¼€æ”¾å­—æ®µæ£€ç´¢ å¼€æ”¾å­—æ®µæ£€ç´¢çš„å…³é”®åœ¨äºä½¿ç”¨ @Public æ³¨è§£ï¼Œæ­¤æ³¨è§£ä¹Ÿæœ‰å¤šä¸ªå‚æ•°ï¼Œ å…¶é‡Šä¹‰å¦‚ä¸‹, é»˜è®¤è¯¥å­—æ®µæ‰€ä»¥çš„æ£€ç´¢æ–¹å¼éƒ½æ˜¯å…³é—­çŠ¶æ€(false)\n   å‚æ•° ç±»å‹ å¤‡æ³¨ Default     eq Boolean æ”¯æŒ field = [any] çš„æŸ¥è¯¢ false   like Boolean æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ false   between Boolean between â€¦ and false   lt Boolean æ”¯æŒ field \u003c [any] çš„æŸ¥è¯¢ false   gt Boolean æ”¯æŒ field \u003e [any] çš„æŸ¥è¯¢ false   le Boolean æ”¯æŒ field \u003c= çš„æŸ¥è¯¢ false   ge Boolean æ”¯æŒ field \u003e= [any] çš„æŸ¥è¯¢ false    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  /** * * @author 4everlynn */ @EqualsAndHashCode(callSuper = true) @TableName(value =\"product\") @Data public class Product extends AncestorDomain implements Serializable { /** * äº§å“åç§° */ @NotNull(message = \"äº§å“åç§°ä¸èƒ½ä¸ºç©º\") @Public(like = true) private String name; }   FAQ å¦‚ä½•ä½¿ä¸»é”®åœ¨è¯·æ±‚ç»“æœä¸­è¿›è¡Œå±•ç¤º ç­”: åœ¨ kernel åŒ…ä¸­æ‰¾åˆ° AncestorDomainï¼Œå»å»é™¤ id å­—æ®µä¸Šæ–¹çš„ @JsonIgnoreæ³¨è§£\nç”Ÿæˆçš„ API æ ¼å¼ä¸è¯·æ±‚è§„èŒƒï¼Ÿ ç­”: åˆ†é¡µè¯·æ±‚: /{BASE_PATH} GET\nåˆ›å»ºè¯·æ±‚: /{BASE_PATH} POST æ›´æ–°è¯·æ±‚: /{BASE_PATH} PATCHï¼ˆbodyä¸­éœ€è¦ä¼ é€’ idï¼‰\nåˆ é™¤è¯·æ±‚: /{BASE_PATH}/{id} DELETE\nå•ä¸ªæŸ¥è¯¢: /{BASE_PATH}/{id} GET\nå¦‚ä½•è¦†ç›–ç”Ÿæˆçš„ API è·¯å¾„ ç­”: å®šä¹‰çš„è·¯å¾„ä¸è‡ªåŠ¨ç”Ÿæˆè®¾å®šçš„è·¯å¾„ä¸€æ¨¡ä¸€æ ·å³å¯\nMaintainer  Edward Jobs   ","description":"","tags":["Spring cli"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/spring-cli/"},{"categories":["work"],"content":" å¯¼è¯»ç›®å½•\n   è´¦å·ä½“ç³»\n  é¡¹ç›®ç®¡ç†\n Issues é‡Œç¨‹ç¢‘    é€šçŸ¥ä¸æ¶ˆæ¯\n é‚®ä»¶é€šçŸ¥ ç«™å†…é€šçŸ¥    æƒé™ä½“ç³»\n ä»“åº“éš”ç¦» ç”¨æˆ·æƒé™ç±»å‹  Guest Reporter Developer Maintainer Owner      æ–‡æ¡£ç®¡ç†\n Wiki Markdown UMLå›¾ æµç¨‹å›¾å¼•æ“(flowã€mermaid)    Devops\n Docker ç§æœ‰ä»“åº“ CI / CD Gitlab Runner    åŸºäºGitçš„åˆ†æ”¯å¼€å‘æ¨¡å‹ (ä»…ä»‹ç»ä¸¤ç§)\n Production / Develop Feature / Release    è¿›é˜¶é˜…è¯»\n Gitlab Hooks Gitlab GraphQL GitLab Pages ä» SVN è¿ç§» Git çš„åŸºæœ¬ä½¿ç”¨    è´¦å·ä½“ç³» graph LR; gitlab(Gitlab) -- group(User Group) up((Account.Core)) -- account(username) up -- avatar up -- nickName up -- pub[public email] up -- com[commit email] up -- password group -- root[Root] -- up group -- admin[Administrator] -- up group -- user[User] -- up   Root \u003e Administrator \u003e User\nå…·ä½“è¯·æŸ¥çœ‹æƒé™éƒ¨åˆ†\n Example. å®ä¾‹åŒ–çš„è´¦å·ä½“ç³» graph LR; gitlab(Gitlab) -- group(åˆæˆé¡¹ç›®ç»„) group -- admin[User - Maintainer - ç»„é•¿] group -- backend[User - åç«¯] group -- js[User - å‰ç«¯] group -- test[User - æµ‹è¯•] group -- ui[User - UI]  é¡¹ç›®ç®¡ç† 1 2 3  åœ¨ Gitlab ä¸­é¡¹ç›®ç®¡ç†ä¸»è¦ä¾æ‰˜äº Issue, äº‹å®ä¸Šï¼Œå¤§å¤šæ•°åŸºäº Git ç ”å‘çš„é¡¹ç›®ç®¡ç†å¹³å°çš†æ˜¯å¦‚æ­¤ æ‰€ä»¥åœ¨è¿™ä¸ªéƒ¨åˆ†é‡Œï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯ç€é‡ä»‹ç» Issue   æˆ‘ä»¬ç»å¸¸åœ¨ GitHub ä¸Šçœ‹åˆ° Issues å¾€å¾€æ˜¯ç½‘å‹å¯¹äºæ¡†æ¶æå‡ºçš„ä¸€äº›å»ºè®®æˆ–è€… BUG ä¿®æ­£ åŒæ ·çš„åœ¨Gitlabä¸Šï¼Œä»–ä»¬çš„åŠŸèƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¸‹é¢å°±å…·ä½“ä»‹ç»ä¸€ä¸‹ã€‚\nIssues Issues æ˜¯åœ¨ GitLab ä¸­å°±æƒ³æ³•å’Œè®¡åˆ’å·¥ä½œè¿›è¡Œåä½œçš„åŸºæœ¬åª’ä»‹ã€‚\næ¦‚è¿° GitLab Issue è·Ÿè¸ªå™¨æ˜¯ä¸€ç§ç”¨äºåä½œå¼€å‘æƒ³æ³•ã€è§£å†³é—®é¢˜å’Œè§„åˆ’å·¥ä½œçš„é«˜çº§å·¥å…·ã€‚ Issue å¯ä»¥å…è®¸åœ¨ææ¡ˆå®æ–½ä¹‹å‰å’Œå®æ–½æœŸé—´åœ¨ä»¥ä¸‹å„æ–¹ä¹‹é—´å…±äº«å’Œè®¨è®ºææ¡ˆï¼š\n ä½ å’Œä½ çš„å›¢é˜Ÿã€‚ å¤–éƒ¨åˆä½œè€…ã€‚  å®ƒä»¬è¿˜å¯ç”¨äºå„ç§å…¶ä»–ç›®çš„ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚å’Œå·¥ä½œæµç¨‹è¿›è¡Œå®šåˆ¶ã€‚ Issue å§‹ç»ˆä¸ç‰¹å®šé¡¹ç›®ç›¸å…³è”ï¼Œä½†å¦‚æœæ‚¨åœ¨ä¸€ä¸ªç»„ä¸­æœ‰å¤šä¸ªé¡¹ç›®ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ç»„çº§åˆ«é›†ä¸­æŸ¥çœ‹æ‰€æœ‰ Issueã€‚ å¸¸è§ç”¨ä¾‹åŒ…æ‹¬ï¼š\n è®¨è®ºæ–°æƒ³æ³•çš„å®æ–½ è·Ÿè¸ªä»»åŠ¡å’Œå·¥ä½œçŠ¶æ€ æ¥å—åŠŸèƒ½å»ºè®®ã€é—®é¢˜ã€æ”¯æŒè¯·æ±‚æˆ–é”™è¯¯æŠ¥å‘Š è¯¦ç»†è¯´æ˜æ–°çš„ä»£ç å®ç°  Issue çš„ç»„æˆ Issue åŒ…å«å„ç§å†…å®¹å’Œå…ƒæ•°æ®ï¼Œä»è€Œåœ¨å¦‚ä½•ä½¿ç”¨å®ƒä»¬æ–¹é¢å…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚\næ¯ä¸ª Issue éƒ½å¯ä»¥åŒ…å«ä»¥ä¸‹å±æ€§ï¼Œä½†å¹¶éæ‰€æœ‰é¡¹ç›®éƒ½å¿…é¡»è®¾ç½®ã€‚\n   åç§° å¤‡æ³¨     Content å†…å®¹   Title æ ‡é¢˜   Description and tasks æè¿°ä¸ä»»åŠ¡   Comments and other activity è¯„è®ºä¸å…¶ä»–è¡Œä¸º   People å‚ä¸çš„äººå‘˜   Author ä½œè€…   Assignee(s) æ‰§è¡Œè€…(è¢«æŒ‡æ´¾è€…)   State (open or closed) çŠ¶æ€(æ‰“å¼€æˆ–è€…å…³é—­)   Confidentiality æœºå¯†æ€§   Milestone å±äºæŸä¸ªé‡Œç¨‹ç¢‘   Due date æˆªæ­¢æ—¥æœŸ   Weight æƒé‡   Labels æ ‡ç­¾(å¦‚Bugã€Featureç­‰)   Votes æŠ•ç¥¨   Reaction emoji emoji è¡¨æƒ…åŒ…   Linked issues é“¾æ¥åˆ°å…¶ä»–çš„issue   Unique issue number and URL å”¯ä¸€çš„ç¼–å·å’ŒURL     æ­¤å¤–, Issue å®Œæ•´æ”¯æŒäº† Markdown è¯­æ³•, åœ¨Issueçš„æè¿°å’Œè¯„è®ºä¸­å¯è‡ªç”±ä½¿ç”¨å¯Œæ–‡æœ¬æˆ–è€… Markdown\n é‡Œç¨‹ç¢‘ 1 2 3 4  GitLab ä¸­çš„é‡Œç¨‹ç¢‘æ˜¯ä¸€ç§è·Ÿè¸ªé—®é¢˜å’Œåˆå¹¶è¯·æ±‚çš„æ–¹æ³•ï¼Œ è¿™äº›è¯·æ±‚æ˜¯ä¸ºäº†åœ¨ç‰¹å®šæ—¶é—´æ®µå†…å®ç°æ›´å¹¿æ³›çš„ç›®æ ‡è€Œåˆ›å»ºçš„ã€‚ é‡Œç¨‹ç¢‘å…è®¸æ‚¨ç»„ç»‡é—®é¢˜å¹¶å°†è¯·æ±‚åˆå¹¶åˆ°ä¸€ä¸ªæœ‰å‡èšåŠ›çš„ç»„ä¸­ï¼Œ å¹¶å…·æœ‰å¯é€‰çš„å¼€å§‹æ—¥æœŸå’Œå¯é€‰çš„æˆªæ­¢æ—¥æœŸã€‚    é‡Œç¨‹ç¢‘çš„æœ¬è´¨æ˜¯ Issues çš„é›†åˆ\n é‡Œç¨‹ç¢‘å¯ä»¥ç”¨ä½œå‘å¸ƒ, è®¾ç½®é‡Œç¨‹ç¢‘åˆ°æœŸæ—¥æœŸä»¥è¡¨ç¤ºæ‚¨çš„ç‰ˆæœ¬çš„å‘å¸ƒæ—¥æœŸï¼Œå¹¶å°†é‡Œç¨‹ç¢‘å¼€å§‹æ—¥æœŸç•™ç©ºã€‚\nå°†é‡Œç¨‹ç¢‘æ ‡é¢˜è®¾ç½®ä¸ºæ‚¨å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚Version 9.4.\né€šè¿‡ä»é—®é¢˜çš„å³ä¾§è¾¹æ ä¸­å…³è”æ‰€éœ€çš„é‡Œç¨‹ç¢‘ï¼Œå°†é—®é¢˜æ·»åŠ åˆ°æ‚¨çš„ç‰ˆæœ¬ä¸­ã€‚\né¡¹ç›®é‡Œç¨‹ç¢‘å’Œå°ç»„é‡Œç¨‹ç¢‘ é¡¹ç›®é‡Œç¨‹ç¢‘åªèƒ½åˆ†é…ç»™è¯¥é¡¹ç›®ä¸­çš„é—®é¢˜æˆ–åˆå¹¶è¯·æ±‚ã€‚\nåœ¨é¡¹ç›®ä¸­çš„ Issues \u003e Milestone ä»¥æŸ¥çœ‹é¡¹ç›®é‡Œç¨‹ç¢‘åˆ—è¡¨ã€‚\nå¯ä»¥å°†ç»„é‡Œç¨‹ç¢‘åˆ†é…ç»™è¯¥ç»„ä¸­ä»»ä½•é¡¹ç›®çš„ä»»ä½•é—®é¢˜æˆ–åˆå¹¶è¯·æ±‚ã€‚\nåœ¨ç»„ä¸­çš„ Issue \u003e Milestone ä»¥æŸ¥çœ‹ç»„é‡Œç¨‹ç¢‘åˆ—è¡¨ã€‚\næ‚¨æœ‰æƒè®¿é—®çš„æ‰€æœ‰é‡Œç¨‹ç¢‘ä¹Ÿå¯ä»¥åœ¨ä»ªè¡¨æ¿é‡Œç¨‹ç¢‘åˆ—è¡¨ä¸­æŸ¥çœ‹ã€‚\nå•å‡»é¡¶éƒ¨å¯¼èˆªæ ä¸Šçš„é‡Œç¨‹ç¢‘ä»¥æŸ¥çœ‹æ‚¨æœ‰æƒè®¿é—®çš„é¡¹ç›®é‡Œç¨‹ç¢‘å’Œç»„é‡Œç¨‹ç¢‘ã€‚\né¡¹ç›®çº§åˆ«é‡Œç¨‹ç¢‘ ç»„çº§åˆ«é‡Œç¨‹ç¢‘ é€šçŸ¥ä¸æ¶ˆæ¯ åœ¨ Gitlab ä¸­å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§é€šçŸ¥æ–¹å¼\n é‚®ä»¶é€šçŸ¥ ç«™å†…é€šçŸ¥  é‚®ä»¶é€šçŸ¥ å¹³å°ä¸­å¯ä»¥é…ç½®é‚®ç®±å‘ä»¶è´¦æˆ·ï¼Œå¹¶å¯é€šè¿‡æ­¤è´¦æˆ·å‘é€é‚®ä»¶ç»™æ‰€æœ‰çš„ç”¨æˆ·, æ­¤å¤„åˆ—ä¸¾å‡ å¤„ç”±ç³»ç»Ÿè§¦å‘çš„é‚®ä»¶é€šçŸ¥ä¸»é¢˜\n ä»£ç å‘ç”Ÿåˆå¹¶ Issue è¢«è¯„è®º è¢«æŒ‡æ´¾åˆ°æŸä¸ª Issue ç›¸å…³çš„ Issue å‘ç”Ÿæ“ä½œ(æ ‡ç­¾å˜æ›´ã€çŠ¶æ€å˜æ›´ç­‰) CI è¿è¡Œå¤±è´¥ åœ¨ Issue ä¸­è¢«æåˆ°  ç«™å†…é€šçŸ¥ ç«™å†…é€šçŸ¥åœ¨ (/dashboard/todos)  ä¸­å¯ä»¥çœ‹åˆ°, å›Šæ‹¬äº†æ‰€æœ‰é‚®ä»¶é€šçŸ¥çš„å†…å®¹, åŒæ—¶ï¼Œåœ¨ Service Worker å¯ç”¨çš„æƒ…å†µä¸‹ï¼ŒGitlab ä¼šé€šè¿‡æµè§ˆå™¨å‘å‡º Native é€šçŸ¥ã€‚\næƒé™ä½“ç³» Gitlab çš„æƒé™æ˜¯å»ºç«‹åœ¨ç»„ä¸ä»“åº“ä¹‹ä¸Šçš„ å…³ç³»ä¸º ç»„ \u003e ä»“åº“ å¦‚æœç”¨æˆ·åœ¨ä¸€ä¸ªç»„å†…è¢«æˆæƒ, åˆ™åœ¨è¯¥ç»„ä¸‹æ‰€æœ‰çš„ä»“åº“éƒ½å¯ä»¥è¿›è¡Œè®¿é—®, å…³ç³»å›¾å¦‚ä¸‹æ‰€ç¤º(ç”±é«˜åˆ°ä½)\ngraph LR; power -- Owner power(æƒé™æ¨¡å‹) -- Maintainer power -- Developer power -- Reporter group(ç»„) -.- sub_group(å­ç»„) -- repo(ä»“åº“) group -.- power sub_group -- power repo -- power  ","description":"","tags":["Git","Gitlab","Work"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/gitlab/"},{"categories":null,"content":"The director of fatewa  4everlynn is alias for Edward Jobs, Since 2012, I have been involved in programming, from RGSS to Java, JavaScript, PHP and Golang  Led the fatewa team and participated in many projects, including but not limited to  Unileverâ€™s H5 Page Sinaâ€™s teachers' grand ceremony Page Construction of official websites of several companies Open-Source Software  ","description":"","tags":null,"title":"Fatewa | 4everlynn","uri":"/fatewa/about/"},{"categories":["web"],"content":"  ","description":"","tags":["BIM","AR"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/tech/bim-summary/"},{"categories":["web"],"content":" åœ¨è¿‡å»çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘åœ¨é¡¹ç›®ä¸­å‚ä¸äº†ä¸€éƒ¨åˆ† WebGL çš„åŠŸèƒ½å®ç°ï¼Œä¸»è¦ä½¿ç”¨åˆ°çš„æŠ€æœ¯ä¸º Cesiumã€ThreeJSï¼Œ é—²æš‡ä¹‹ä½™ï¼Œå°±æ‰“ç®—è®°å½•ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¡†æ¶çš„ä½¿ç”¨ï¼Œä»¥åŠä¸ Vue å°è£…ç»“åˆçš„è¿‡ç¨‹ã€‚\n ä»£ç ä»“åº“åœ°å€, å–œæ¬¢è®°å¾—ç»™ä¸ªStarå‘€~\nWhy Three.js éšç€ WebGL é€æ¸æ™®åŠï¼Œé¡ºåº”è€Œç”Ÿçš„æ¡†æ¶ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œåœ¨è¿™å…¶ä¸­TheeJSåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´æ˜¯çŸ¥ååº¦ã€å®Œæˆåº¦æœ€é«˜çš„æ¡†æ¶ï¼Œ\nä¹Ÿæ­£æ˜¯å…¶ä¼˜ç‚¹ä¹‹å¤šä½¿å¾—æˆ‘ä»¬åœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™ï¼Œåšå®šåœ°é€‰æ‹©äº†å®ƒï¼Œè¯è™½å¦‚æ­¤ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯é‡åˆ°äº†ä¸å°‘æ£˜æ‰‹çš„é—®é¢˜ï¼Œ\nåœ¨æ­¤æˆ‘ä¾¿è®°å½•ã€å¤ç›˜ä¸€ä¸‹æ•´ä¸ªå°è£…ã€ä½¿ç”¨çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿è‡ªå·±å°†æ¥è¿›è¡ŒæŸ¥é˜…ï¼Œä¹Ÿä¸ºåæ¥è€…æä¾›ä¸€äº›æ¡ˆä¾‹ã€‚\nVersion \u0026 Tech  Vue ^2.6.11 three ^0.128.0 Typescript ~4.1.5 rxjs ^6.6.7 vue-styled-components ^1.6.0  Project Struct . â”œâ”€â”€ App.vue â”œâ”€â”€ components â”‚Â â””â”€â”€ base â”‚Â â”œâ”€â”€ fatewa-gl â”‚Â â”‚Â â””â”€â”€ index.tsx # å…¥å£ç»„ä»¶ â”‚Â â””â”€â”€ types â”‚Â â””â”€â”€ index.ts # æ¥å£ã€ç±»å‹å®šä¹‰ â”œâ”€â”€ libs â”‚Â â”œâ”€â”€ lib-plugins # å„ç§é»˜è®¤å®ç°çš„æ’ä»¶ â”‚Â â””â”€â”€ lib-utils.ts # å·¥å…·ç®—æ³• â”œâ”€â”€ main.ts â”œâ”€â”€ router â”‚Â â””â”€â”€ index.ts â”œâ”€â”€ shims-tsx.d.ts â”œâ”€â”€ shims-vue.d.ts â”œâ”€â”€ textures # ä¸‰ç»´çº¹ç† â””â”€â”€ views Types ç»è¿‡è®¾è®¡ï¼Œæ¡†æ¶æ•´ä½“é‡‡ç”¨æ’ä»¶åŒ–ç¼–ç¨‹æ–¹å¼, å°†åŠŸèƒ½è§£è€¦ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†æ›´å¼ºçš„ç»´æŠ¤æ€§ã€‚\nå…¶ä¸­ pass å‡½æ•°ä» lib-utils å¼•å…¥\nä»…ä»…åªæ˜¯ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œç”¨äºæ’é™¤ eslint çš„é”™è¯¯\npass å‡½æ•° 1 2 3 4 5 6 7 8  /** * å±€éƒ¨è§„é¿ eslint å£°æ˜æœªå¼•ç”¨çš„å˜é‡è§„åˆ™ * @param args */ // eslint-disable-next-line function pass (args: any) { // passed for eslint }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93  import { Camera, Scene, Renderer } from 'three' import { pass } from '@/libs/lib-utils' /** * æ’ä»¶å®‰è£…å‚æ•° */ interface PluginInstallOptions { /** * åœºæ™¯ */ scene: Scene, /** * æ‘„åƒå¤´ */ camera: Camera, /** * æ¸²æŸ“å™¨ */ renderer: Renderer } /** * æ’ä»¶çš„é’©å­å‡½æ•° */ interface PluginHooks { beforeInstall (options: PluginInstallOptions): void afterInstall (options: PluginInstallOptions): void /** * æ¸²æŸ“å‡½æ•°ï¼Œå°†åœ¨æ•´ä¸ªä¸»å¾ªç¯ä¸­è¿›è¡Œæ¸²æŸ“ * éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€»è¾‘åº”å°½å¯èƒ½åœ°ç®€å•ï¼Œå¦åˆ™ä¼šå½±å“åˆ°æ•´ä½“æ¸²æŸ“çš„å¸§æ•° * @param options */ render (options: PluginInstallOptions): void } /** * æ’ä»¶æ¥å£ */ interface Plugin extends PluginHooks { /** * æ‰€æœ‰çš„æ’ä»¶éœ€è¦å®ç°å®‰è£…æ–¹æ³• * @param options */ install (options: PluginInstallOptions): void } /** * æ’ä»¶é€‚é…å™¨ï¼Œå¯¹äºä¸å…³å¿ƒé’©å­å‡½æ•°çš„æ’ä»¶ * ç›´æ¥ç»§æ‰¿æŠ½è±¡ç±»å³å¯ */ abstract class GLPlugin implements Plugin { /** * é’©å­å‡½æ•°çš„é»˜è®¤å®ç° * @param options */ afterInstall (options: PluginInstallOptions): void { pass(options) } /** * é’©å­å‡½æ•°çš„é»˜è®¤å®ç° * @param options */ beforeInstall (options: PluginInstallOptions): void { pass(options) } abstract install(options: PluginInstallOptions): void /** * é’©å­å‡½æ•°çš„é»˜è®¤å®ç° * @param options */ render (options: PluginInstallOptions): void { pass(options) } } /** * å®ä½“ç±»ï¼Œæš‚æœªå®ç°å‚æ•° */ interface Entity { none: any } /** * ç»„ä»¶çš„ Prop å®šä¹‰ */ interface GL { entities: Entity [], plugins: Plugin [] } export { GL, Entity, Plugin, PluginInstallOptions, GLPlugin }    å¯¹äºè¿™ä¸ªç»“æ„ä¸‹çš„å…·ä½“å®ç°ï¼Œå°†åœ¨åç»­çš„æ–‡ç« ä¸­ä»‹ç»\n ","description":"","tags":["three.js","vue"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/tech/threejs-chapter-1/"},{"categories":["docker"],"content":" ç½‘ç«™ å¯¹äºæ¯ä¸ªäººéƒ½ä¸é™Œç”Ÿï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ä¸å„ç§ä¸åŒçš„ç½‘ç«™è¿›è¡Œäº’åŠ¨ï¼Œéšç€ä¿¡æ¯åŒ–ä¸æ–­å‘å±•ï¼Œå¾ˆå¤šå…¬å¸ä¸ä¸ªäººéƒ½æ‹¥æœ‰äº†è‡ªå·±çš„ç½‘ç«™ï¼Œå¾ˆå¤šæ—¶å€™åšç½‘ç«™çš„å¿µå¤´éƒ½æ­¢æ­¥äºæŠ€æœ¯é™åˆ¶ï¼Œé‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘å°±ä»‹ç»ä¸€ä¸ªè®©å¤§å®¶å¯ä»¥å¾ˆå¿«æ­å»ºèµ·è‡ªå·±ç½‘ç«™çš„æ–¹æ³•ï¼Œå¦‚æœè¿™æ­£æ˜¯æ‚¨æ‰€éœ€çš„å°±ç»§ç»­çœ‹ä¸‹å»å§ï¼\n WordPress æ­£å¦‚ä½ æ‰€è§,ä»Šå¤©è¦ä»‹ç»çš„å°±æ˜¯å¤§åé¼é¼çš„ WordPressï¼Œä½¿ç”¨ WordPress ï¼Œæ‚¨ä»…éœ€è¦ä¸€ç‚¹ç‚¹å¸¸ç”¨çš„è®¡ç®—æœºçŸ¥è¯†å³å¯ï¼Œå¦‚æœæ‚¨å¯¹å®ƒè¿˜ä¸è®¤è¯†ï¼Œé‚£ä¹ˆä»¥ä¸‹æ˜¯ ç»´åŸºç™¾ç§‘ å¯¹äº WordPress çš„ä¸€æ®µæè¿°:\n WordPressæ˜¯ä¸€ä¸ªä»¥PHPå’ŒMySQLä¸ºå¹³å°çš„è‡ªç”±å¼€æºçš„åšå®¢è½¯ä»¶å’Œå†…å®¹ç®¡ç†ç³»ç»Ÿã€‚WordPresså…·æœ‰æ’ä»¶æ¶æ„å’Œæ¨¡æ¿ç³»ç»Ÿã€‚ æˆªè‡³2018å¹´4æœˆï¼Œæ’åå‰1000ä¸‡çš„ç½‘ç«™ä¸­è¶…è¿‡30.6%ä½¿ç”¨WordPressã€‚ WordPressæ˜¯æœ€å—æ¬¢è¿çš„ç½‘ç«™å†…å®¹ç®¡ç†ç³»ç»Ÿã€‚ å…¨çƒæœ‰å¤§çº¦30%çš„ç½‘ç«™(7äº¿5000ä¸ª)éƒ½æ˜¯ä½¿ç”¨WordPressæ¶è®¾ç½‘ç«™çš„ã€‚ WordPressæ˜¯ç›®å‰å› ç‰¹ç½‘ä¸Šæœ€æµè¡Œçš„åšå®¢ç³»ç»Ÿã€‚ WordPressåœ¨æœ€è‘—åçš„ç½‘ç»œå‘å¸ƒé˜¶æ®µä¸­è„±é¢–è€Œå‡ºã€‚ å¦‚ä»Šï¼Œå®ƒè¢«ä½¿ç”¨åœ¨è¶…è¿‡7000ä¸‡ä¸ªç«™ç‚¹ä¸Šã€‚\n æˆ–è®¸ä½ å¯¹äºå…¶ä¸­çš„ä¸€äº›ä¸“ä¸šæœ¯è¯­å¹¶ä¸äº†è§£ï¼Œæ²¡å…³ç³»ï¼åªè¦çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå¾ˆå¯é çš„ç³»ç»Ÿå³å¯ã€‚\nå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº WordPress çš„çŸ¥è¯†ï¼Œå¯ä»¥è®¿é—® Wordpress ä¸­æ–‡å®˜ç½‘\næ€ä¹ˆåš ï¼Ÿ è™½ç„¶ Wordpress å¤šä»¥å®‰è£…ç®€ä¾¿è‘—ç§°ï¼Œä½†ä½œä¸ºæ²¡æœ‰ä»»ä½•ç›¸å…³çŸ¥è¯†çš„ç¾¤ä½“ï¼Œæƒ³è¦æˆåŠŸå®‰è£…ä»ç„¶å…·æœ‰ä¸€å®šéš¾åº¦ï¼ŒæŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œæ­å»ºPHPçš„è¿è¡Œç¯å¢ƒå°±æ˜¯åŸºç¡€ï¼Œè¿™ä¸€æ­¥å¯èƒ½å°±ä¼šåŠé€€å¾ˆå¤§ä¸€éƒ¨åˆ†äººï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘è¦ä»‹ç»çš„å°±æ˜¯ä½¿ç”¨ Docker è¿›è¡Œå®‰è£…çš„æ–¹å¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œåªéœ€è¦æœ‰ä¸€å° Linux çš„ä¸»æœºå³å¯(éœ€è¦æ”¯æŒDockerè¿è¡Œ)\nå…³äº Docker åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä¸å¯¹ Docker è¿›è¡Œè¿‡å¤šçš„ä»‹ç»ï¼Œåç»­çš„ç¯‡ç« ä¸­æˆ‘ä¼šé€æ­¥åœ°ä»‹ç»è¿™ä¸ªæœåŠ¡å®¹å™¨åŒ–æ—¶ä»£è¶…çº§ğŸ”¥çš„å¼€æºå·¥å…·ï¼Œé‚£ä¹ˆè‡³å°‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œåªéœ€è¦èƒ½å¤Ÿå®‰è£…å¹¶ç®€å•ä½¿ç”¨å³å¯\nå®‰è£… Docker åœ¨ CentOS 7 å®‰è£…dockerè¦æ±‚ç³»ç»Ÿä¸º64ä½ã€ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¸º 3.10 ä»¥ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰æœºå™¨çš„ç‰ˆæœ¬\n1  uname -r   è¿è¡Œç»“æœå‚è€ƒ\n1 2 3  [root@disware ~]# uname -r 3.10.0-693.5.2.el7.x86_64 [root@disware ~]#    å®‰è£…å®Œæˆåå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯\n1  docker -v   è¿è¡Œç»“æœå‚è€ƒ\n1 2  [root@disware ~]# docker -v Docker version 18.09.5, build e8ff056   å®‰è£…å®Œæˆï¼Œæˆ‘ä»¬æ¥ç€å®‰è£… docker-composeï¼Œç”±äºè¿™ä¸ªåœ¨å›½å†…å®‰è£…æ¯”è¾ƒæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™é‡Œæä¾›çš„åŠ é€ŸæœåŠ¡è¿›è¡Œå®‰è£…\nä»¥ä¸‹æ˜¯å®‰è£… docker-compose çš„å‘½ä»¤\n1 2  curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` \u003e /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose   å®‰è£…å®Œæˆåï¼ŒåŒæ ·åœ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯\n1  docker-compose -v   è¿è¡Œç»“æœå‚è€ƒ\n1 2  [root@disware ~]# docker-compose -v docker-compose version 1.25.4, build 8d51620a   åˆ›å»ºæœåŠ¡æ–‡ä»¶å¤¹ åœ¨æ­¤å¤„æˆ‘ä»¥ /opt/wordpress è¿™ä¸ªæ–‡ä»¶å¤¹ä¸ºä¾‹\n1  mkdir /opt/wordpress \u0026\u0026 cd /opt/wordpress   ç¼–å†™ .env æ–‡ä»¶ è¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯é…ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£æˆç±»ä¼¼äºæŸä¸ªè½¯ä»¶çš„é…ç½®é¡¹, åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œ\n1  vi .env   æ¥ç€å°†ä»¥ä¸‹å†…å®¹è¾“å…¥åˆ°å…¶ä¸­\n1 2 3 4 5 6 7 8  # æ•°æ®åº“åç§° DB_NAME=my_website # æ•°æ®åº“ ç”¨æˆ·å DB_USER=root # æ•°æ®åº“ å¯†ç  DB_PASSWORD=root123 # æ•°æ®åº“ HOSTåç§° HOST_MYSQL=mysql   æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç´§æ¥ç€è¿›è¡Œç¼–å†™ docker-compose.yml (æœåŠ¡ç»“æ„çš„æè¿°æ–‡ä»¶)\n1  vi docker-compose.yml   è¾“å…¥å†…å®¹å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  version:'3'services:wordpress:image:wordpresshostname:wordpressports:- \"9812:80\"environment:DB_HOST:${HOST_MYSQL}DB_NAME:${DB_NAME}DB_USER:${DB_USER}DB_PASSWORD:${DB_PASSWORD}volumes:- ./data/wordpress/root:/var/www/html- ./logs/php/:/var/log/php/:rwdepends_on:- mysqlmysql:image:mysql:5.7hostname:${HOST_MYSQL}volumes:- ./data/mysql:/var/lib/mysql- ./my.cnf:/etc/my.cnfrestart:alwaysenvironment:MYSQL_ROOT_PASSWORD:${DB_PASSWORD}  ç„¶åï¼Œç”±äºæˆ‘ä»¬çš„ç½‘ç«™ä¸­ä¼šæœ‰ä¸€äº›ä¸­æ–‡å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®åº“çš„å­—ç¬¦é›†è¿›è¡Œä¸€ä¸ªé…ç½®, åœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œ\n1  vi my.cnf   è¾“å…¥å†…å®¹å¦‚ä¸‹\n[mysqld] user=mysql default-storage-engine=INNODB character-set-server=utf8 [client] default-character-set=utf8 [mysql] default-character-set=utf8 å¯åŠ¨æœåŠ¡ å¦‚æœä½ é¡ºåˆ©äº†è¿›è¡Œä»¥ä¸Šçš„å…¨éƒ¨æ­¥éª¤ï¼Œæ­å–œï¼æˆ‘ä»¬å¯ä»¥å¯åŠ¨è‡ªå·±çš„ç½‘ç«™äº†ï¼\nåœ¨å½“å‰ç›®å½•ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯ä»¥åå°çš„å½¢å¼å¯åŠ¨åº”ç”¨\n1  docker-compose up -d   å¦‚æœåœ¨ç»ˆç«¯ä¸­ï¼Œä½ çœ‹åˆ°äº†ä»¥ä¸‹è¾“å‡ºï¼Œé‚£ä¹ˆåº”ç”¨æ­£å¼å¯åŠ¨äº†\n1 2 3 4  [root@disware wordpress]# docker-compose up -d Creating network \"wordpress_default\" with the default driver Creating wordpress_mysql_1 ... done Creating wordpress_wordpress_1 ... done   åœ¨æ­£å¼å®‰è£…ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°æ®åº“\n1 2 3 4 5 6  docker exec -ti wordpress_mysql_1 mysql -u root -proot123 create database `my_website`; exit    åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost(æˆ–è€… Linux IP):9812 å³å¯çœ‹åˆ°å®‰è£…ç•Œé¢\n é€‰æ‹©å®Œè¯­è¨€åï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·ä¸€ä¸ªè¡¨å•, æŒ‰ç…§ä»¥ä¸‹å†…å®¹å¡«å†™å³å¯\n   åç§° å†…å®¹     æ•°æ®åº“å my_website   ç”¨æˆ·å root   å¯†ç  root123   æ•°æ®åº“ä¸»æœº mysql   è¡¨å‰ç¼€ wp_    åˆ°æ­¤ï¼Œ Wordpress å°±å®‰è£…å®Œæˆäº†ï¼Œåç»­å¡«å†™ç”¨æˆ·åã€å¯†ç ï¼Œç™»é™†å³å¯\n","description":"","tags":["docker","wordpress","docker-compose"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/docker/wordpress/"},{"categories":["docker"],"content":"å‰è¨€ æŠ€æœ¯åœˆçš„å‘å±•ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ç¬æ¯ä¸‡å˜ï¼Œä»å»å¹´å¼€å§‹ 5G æŠ€æœ¯é€æ¸è½åœ°å•†ç”¨ï¼Œäººå·¥æ™ºèƒ½ä¹Ÿæ…¢æ…¢åœ°æˆç†Ÿï¼Œå°±å‘å±•è€Œè¨€è¿™å‡ å¹´çš„é€Ÿåº¦å¯ä»¥è¯´æ˜¯è¾¾åˆ°äº†ä¸€ä¸ªéå¸¸ææ€–çš„åœ°æ­¥ï¼Œåœ¨è¿ç»´é¢†åŸŸï¼ŒæŠ€æœ¯ä¹Ÿæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„ docker å°±æ˜¯è¿™äº›å¹´åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å·²ç»å¹¿æ³›è¢«åº”ç”¨çš„ä¸€é—¨æŠ€æœ¯ã€‚\nä»¥ä¸‹æ˜¯ç™¾åº¦ç™¾ç§‘ä¸­å¯¹äº docker çš„ä¸€æ®µä»‹ç»\n Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨æˆ–Windows æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚\n ä»€ä¹ˆæ˜¯å®¹å™¨ å®¹å™¨ ä¸ è™šæ‹Ÿæœº éå¸¸æ¥è¿‘ï¼Œå´åˆä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œç›¸è¾ƒäºè™šæ‹Ÿæœºæ²‰é‡çš„æ¶æ„ï¼Œå®¹å™¨å¯ä»¥è¯´æ˜¯æ‹¥æœ‰éå¸¸è‹—æ¡çš„ â€˜èº«æâ€™ï¼Œå®ƒå¯ä»¥åœ¨å‡ ç§’å†…å¯åŠ¨ï¼Œå¹¶èƒ½ä¸å®¿ä¸»æœºç›´æ¥è¿›è¡Œé€šè®¯ï¼Œä¸è™šæ‹Ÿæœºä¸åŒçš„æ˜¯ï¼Œå®¹å™¨æ‰€èƒ½åšåˆ°çš„éš”ç¦»ï¼Œé€šå¸¸æ˜¯è¿›ç¨‹çº§åˆ«çš„ï¼Œåœ¨èµ„æºä¸Šå®ƒæ˜¯ä¸å®¿ä¸»æœºå…±äº«çš„ï¼Œä¸¥æ ¼æ¥è¯´å®¹å™¨å¹¶ä¸æ˜¯çœŸæ­£çš„è™šæ‹ŸåŒ–ã€‚ä½œä¸ºå¼€å‘ã€è¿ç»´æ—¶ä½¿ç”¨ï¼Œæˆ‘ä»¬çš„æ¯ä¸€ä¸ªæœåŠ¡ã€åº”ç”¨éƒ½å¯¹åº”ä¸€ä¸ªå®¹å™¨ï¼Œä½œä¸ºåº”ç”¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®¹å™¨å†…éƒ¨ä¸€èˆ¬ä¼šè£…è½½busyboxã€alpineç­‰éå¸¸è½»é‡çš„æ“ä½œç³»ç»Ÿã€‚\nå®‰è£… docker (ä»¥ CentOS 7 ä¸ºä¾‹) å®‰è£… yum æº åœ¨ç»ˆç«¯ä¸­è¾“å…¥\n1  curl -f sSL https://get.docker.com/ | sh -s -- --mirror AzureChinaCloud   æ›´æ–° yum ç¼“å­˜ 1  yum makecache fast   å®‰è£…æœ€æ–°ç‰ˆ docker 1  yum -y install docker-engine   å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ£€éªŒ\n1  docker -v   docker æ”¯æŒçš„å‘½ä»¤ ï¼ˆåˆ—ä¸¾å¸¸ç”¨ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  Commands: build Build an image from a Dockerfile commit Create a new image from a container's changes exec Run a command in a running container images List images logs Fetch the logs of a container ps List containers pull Pull an image or a repository from a registry push Push an image or a repository to a registry restart Restart one or more containers rm Remove one or more containers rmi Remove one or more images run Run a command in a new container start Start one or more stopped containers stop Stop one or more running containers tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE top Display the running processes of a container version Show the Docker version information   Hello World æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä»¥ Hello World,ä½œä¸ºæŠ€æœ¯å…¥é—¨çš„æ¡ˆä¾‹, æˆ‘ä»¬ä½¿ç”¨ pull å‘½ä»¤ï¼Œæ‹‰å– docker-hub å®˜æ–¹ä»“åº“ä¸­çš„ hello-world é•œåƒ\n1  docker pull hello-world   ç„¶å è¾“å…¥\n1  docker run hello-world   æ­¤æ—¶ç»ˆç«¯ä¼šè¾“å‡ºä¸‹é¢è¿™æ®µè‹±æ–‡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  Hello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started/   è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº† docker æœ€åŸºç¡€çš„åº”ç”¨\né…ç½®é•œåƒä»“åº“ åœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å›½å†…é•œåƒè¿›è¡ŒåŠ é€Ÿ(docker-hub æ‹‰å–å¤§é•œåƒéå¸¸æ…¢)ï¼Œæ‰€ä»¥åœ¨æ­¤å¤„æˆ‘ä»¬ç»§ç»­è¿›è¡Œé•œåƒé…ç½®ã€‚\n1  vi /etc/docker/daemon.json   è¾“å…¥ä»¥ä¸‹å†…å®¹\n1 2 3 4 5 6 7 8  { \"registry-mirrors\": [ \"https://1nj0zren.mirror.aliyuncs.com\", \"https://docker.mirrors.ustc.edu.cn\", \"http://f1361db2.m.daocloud.io\", \"https://registry.docker-cn.com\" ] }   æ¥ç€ï¼Œæˆ‘ä»¬é‡å¯ docker æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ\n1  systemctl restart docker   ","description":"","tags":["docker"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/docker/docker/"}]
