[{"categories":["java"],"content":"Fatewa Spring Cli Easy to build Strongerrestful API Now at version 1.0.0   Features Quick Start  Brahma Cli  é€‰æ‹©æ¨¡ç‰ˆ é€‰æ‹©æ¨¡ç‰ˆç‰ˆæœ¬ è¾“å…¥é¡¹ç›®æè¿° ç‰¹æ€§é€‰æ‹©(Features)  ç‰¹æ€§ä¸€è§ˆè¡¨   é€‰æ‹©æ•°æ®åº“ç±»å‹   Project  Kernel æ˜¯ä»€ä¹ˆ ? Migration  çŠ¶æ€ åˆ›å»º å‡çº§ å›é€€   MybatisX ä»£ç ç”Ÿæˆ Controller  Response å†™æ³•  é»˜è®¤ç­–ç•¥ å­é”®ç­–ç•¥ å¹³é“ºç­–ç•¥ åŸå§‹ç±»å‹   å‚æ•°åˆæ³•æ€§æ ¡éªŒ   æ–­è¨€ æ¥å£å¯¼å‡ºä¸å¼€æ”¾å­—æ®µæ£€ç´¢  æ¥å£å¯¼å‡º å¼€æ”¾å­—æ®µæ£€ç´¢   FAQ  å¦‚ä½•ä½¿ä¸»é”®åœ¨è¯·æ±‚ç»“æœä¸­è¿›è¡Œå±•ç¤º ç”Ÿæˆçš„ API æ ¼å¼ä¸è¯·æ±‚è§„èŒƒï¼Ÿ å¦‚ä½•è¦†ç›–ç”Ÿæˆçš„ API è·¯å¾„     Maintainer    Features  Response Join point Mybatis Migration Guava Mybatis Plus Auto SQL Builder \u0026 Controller automatic injection Task Scheduling (WIP) Export Simple Excel (WIP)  Quick Start Brahma Cli Spring cli éœ€è¦é€šè¿‡ Brahma Cli è¿›è¡Œäº¤äº’æ¸²æŸ“ï¼Œæ‰€ä»¥éœ€è¦å…ˆè¿›è¡Œå®‰è£…\n1 2  npm --registry https://nexus.wuchuangroup.com/repository/npm-group/ \\ install -g @fatewa/brahma-cli   å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ create æŒ‡ä»¤è¿›è¡Œé¡¹ç›®åˆ›å»º\n1  brahma create app   é€‰æ‹©æ¨¡ç‰ˆ é€‰æ‹©æ¨¡ç‰ˆç‰ˆæœ¬  é€šå¸¸æƒ…å†µä¸‹ï¼Œé€‰æ‹©æœ€æ–°çš„ç‰ˆæœ¬å³å¯\n è¾“å…¥é¡¹ç›®æè¿° åœ¨æ­¤å¤„è¾“å…¥çš„æè¿°ä¼šè¿›å…¥åˆ° pom.xml description æ ‡ç­¾ä¸‹\n æ¥ä¸‹æ¥ä»…éœ€æ ¹æ®æç¤ºè¾“å…¥ç»„ç»‡ä¿¡æ¯(group)ã€ç‰ˆæœ¬ä¿¡æ¯(version) è¿™å‡ é¡¹ éƒ½ä¼šåœ¨ pom.xml ä¸­ç”Ÿæ•ˆ\n ç‰¹æ€§é€‰æ‹©(Features) ç‰¹æ€§ä¸€è§ˆè¡¨    åç§° ä½œç”¨     Mybatis Migration æ·»åŠ  Mybatis Migration åŠŸèƒ½   Mybatis Plus æ·»åŠ  Mybatis Plus ä¾èµ–   Controller DEMO æ·»åŠ  Controller æ ·ä¾‹ä»£ç (Hello World Controller)   Env Config File æ˜¯å¦ç”Ÿæˆ .env æ–‡ä»¶   Dockerfile æ˜¯å¦ç”Ÿæˆ Dockerfile   Gitlab CI æ˜¯å¦ç”Ÿæˆ .gitlab-ci.yml, æ­¤åŠŸèƒ½ç›®å‰ç‰ˆæœ¬æœªå®ç°    é€‰æ‹©æ•°æ®åº“ç±»å‹ åç»­æ­¥éª¤ä¼šæ ¹æ®æ­¤æ­¥éª¤é€‰æ‹©çš„ä¸åŒï¼Œç”Ÿæˆä¸åŒçš„é€‰é¡¹ï¼Œ æ ¸å¿ƒä¸»è¦ä¸ºæ•°æ®åº“çš„ä¸€äº›å‚æ•°\nè‡³æ­¤ï¼Œé¡¹ç›®å·²ç»ç”Ÿæˆå®Œæ¯•ã€‚\nProject Kernel æ˜¯ä»€ä¹ˆ ? Kernel å°è£…äº† spring-cli åŠŸèƒ½é¡¹çš„å†…æ ¸ä»£ç ï¼Œ æä¾›äº† Response ä»£ç†ã€åŠ¨æ€è·¯ç”±æ³¨å†Œç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œ åŒæ—¶å¦‚æœåœ¨é¡¹ç›®ä¸­ä½ å¸Œæœ›ä¿®æ”¹ response ä¸­çš„ code å­—æ®µï¼Œ ä¹Ÿå¯ä»¥åœ¨ kernel / constants / ResponseCode ä¸­è¿›è¡Œè°ƒæ•´\nMigration é¡¹ç›®ä¸­é‡‡ç”¨çš„ Migration æ˜¯ Mybatis Migrationï¼Œ å¦‚æœä½ å¸Œæœ›çœ‹åˆ°è¯¦ç»†çš„æ–‡æ¡£è¯·è®¿é—®å®˜æ–¹æ–‡æ¡£, ä¸ºäº†èƒ½å¤Ÿæœ€å°åŒ–è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨ä¸‹æ–‡ä¸­ç€é‡ä»‹ç»å‡ ä¸ªæŒ‡ä»¤\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æä¾›äº†å¿«æ·è®¿é—® mybatis migration çš„è„šæœ¬ï¼Œä½ å¯ä»¥æ ¹æ® å½“å‰è¿è¡Œçš„æ“ä½œç³»ç»Ÿè¿›è¡Œé€‰æ‹©\n db.sh é€‚ç”¨äº Mac OSX/Linux db.bat é€‚ç”¨äº Windows   æˆ‘ä»¬æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿åœ¨æ•°æ®åº“ä¿¡æ¯è¾“å…¥æ­¥éª¤ä¸­æŒ‡å®šçš„æ•°æ®åº“åç§°ï¼Œå·²ç»è¢«åˆ›å»º\n çŠ¶æ€ Windows:\n1  ./db.bat status   Linux/Mac:\n1  ./db.sh status   pending å³æœ¬åœ°æœ‰ï¼Œæ•°æ®åº“å†…æ²¡æœ‰ï¼Œéœ€è¦è¿›è¡Œå‡çº§\nåˆ›å»º Windows:\n1  ./db.bat new \"create m_user\"   Linux/Mac:\n1  ./db.sh new \"create m_user\"   æ‰§è¡ŒæˆåŠŸåï¼Œä¼šåœ¨ migrate/repository/scripts ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶\nè¾“å…¥å†…å®¹ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  -- // create m_user -- Migration SQL that makes the change goes here. -- è¿™é‡Œå†™åˆ›å»ºçš„è„šæœ¬ create table m_user ( id bigserial not null, name varchar(64), age int ); create unique index table_name_id_uindex on m_user (id); alter table m_user add constraint table_name_pk primary key (id); -- //@UNDO -- SQL to undo the change goes here. -- è¿™é‡Œå†™å›é€€çš„è„šæœ¬ drop table m_user;   å‡çº§ Windows:\n1  ./db.bat up \u003ccount\u003e   Linux/Mac:\n1  ./db.sh up \u003ccount\u003e   \u003ccount\u003e ä¸ºå‡çº§çš„æ•°é‡(å¯ä¸å¡«ï¼Œé»˜è®¤å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„SQL) å›é€€ Windows:\n1  ./db.bat down \u003ccount\u003e   Linux/Mac:\n1  ./db.sh down \u003ccount\u003e   \u003ccount\u003e ä¸ºå›é€€çš„æ•°é‡(å¯ä¸å¡«ï¼Œé»˜è®¤å›é€€ä¸€ä¸ªç‰ˆæœ¬) MybatisX ä»£ç ç”Ÿæˆ åœ¨ Idea ä¸­å®‰è£… MybatisXï¼ˆMybtis Plus å®˜æ–¹æä¾›çš„ä»£ç ç”Ÿæˆå™¨ï¼‰\nä»¥ä¸‹ä¸ºé…ç½®é¡¹é€‰æ‹©æ¡ˆä¾‹\nåœ¨é›†æˆçš„æ•°æ®åº“é¢æ¿ä¸­å³é”®ç‚¹å‡»è¡¨ï¼Œå¹¶é€‰ä¸­ MybatisX-Generator\nController Response å†™æ³• å†…æ ¸ä¸­é»˜è®¤å·²ç»å®ç°äº†å…¨å±€çš„è¿”å›ç»“æœå°è£…ï¼Œä»¥ä¸‹ä¸ºé»˜è®¤çš„è¿”å›æ ¼å¼\n1 2 3 4 5  interface ProtocolResponse { code: string; msg: string; data: any; }   åœ¨ç¼–å†™çš„æ—¶å€™ä½“éªŒå¦‚ä½•å‘¢ï¼Ÿä¸‹é¢åˆ†å››ä¸ªæ­¥éª¤è¿›è¡Œä»‹ç»\né»˜è®¤ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10  // Response ä½¿ç”¨å­é”®ç­–ç•¥ // é»˜è®¤æ”¾ç½®åœ¨ data ä¸‹  @GetMapping public CliQuery query(CliQuery query){ final Integer cycle=query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4 5 6 7 8  { code: 'E0001', msg: 'ok', data: { cycle: null, version: null } }   å­é”®ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10 11 12  /** * Response ä½¿ç”¨å­é”®ç­–ç•¥ * å¹¶å°†æ•°æ®æ”¾ç½®åœ¨ child ä¸‹ */ @GetMapping(\"/keyed\") @Inclusion(value = InclusionStrategy.WITH_KEY, key = \"child\") public CliQuery queryWithKey(CliQuery query) { final Integer cycle = query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4 5 6 7 8  { code: 'E0001', msg: 'ok', child: { cycle: null, version: null } }   å¹³é“ºç­–ç•¥ 1 2 3 4 5 6 7 8 9 10  /** * Response ä½¿ç”¨å¹³é“ºç­–ç•¥ */ @GetMapping(\"tiled\") @Inclusion(InclusionStrategy.TILED) public CliQuery queryTiled(CliQuery query) { final Integer cycle = query.getCycle(); Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4 5 6  { code: 'E0001', msg: 'ok', cycle: null, version: null }   åŸå§‹ç±»å‹ æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨ Controller è¿”å›ä¸åŒäºå…¨å±€ Response çš„æ•°æ®ç»“æ„ æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°å†…æ ¸ä¸­æ”¯æŒçš„è‡ªå®šä¹‰æ¶ˆæ¯ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11  /** * æŒ‰åŸæ ·è¿”å›ä¸è¿›è¡Œå¤„ç† */ @GetMapping(\"original\") @OriginalResponse public CliQuery original(CliQuery query) { final Integer cycle = query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ­¤æ—¶è¿”å›çš„ç»“æœä¸º\n1 2 3 4  { cycle: null, version: null }   å‚æ•°åˆæ³•æ€§æ ¡éªŒ å†…æ ¸ä¸­å¯¹äºå‚æ•°æ ¡éªŒçš„å®ç°æ˜¯åŸºäº jpa-validation-api çš„ æˆ‘ä»¬ä»…ä»‹ç»æœ€å°çš„ç”¨æ³•ï¼Œå¦‚æœä½ æƒ³è¦æ›´åŠ è¯¦ç»†åœ°äº†è§£åº•å±‚ï¼Œé‚£ä¹ˆæˆ‘éå¸¸æ¨èé˜…è¯» è¿™ç¯‡æ–‡ç« \nå‚æ•°æ ¡éªŒæ˜¯åŸºäºå¯¹ Bean çš„æ³¨è§£\n1 2 3 4 5 6 7 8 9 10  @Data public class CliQuery { @NotNull(message = \"æŸ¥è¯¢æ—¶éœ€è¦é™„å¸¦ç‰ˆæœ¬å·\") private String version; @Max(value = 20, message = \"å¾ªç¯æ¬¡æ•°ä¸åº”è¶…è¿‡20\") private Integer cycle; }   Controller\n1 2 3 4 5 6 7 8  // åœ¨æ ¡éªŒå‚æ•°å‰é¢æ·»åŠ æ³¨è§£ @Valid ç›¸å½“äºæ‰“å¼€å¼€å…³  @GetMapping public CliQuery query(@Valid CliQuery query) { final Integer cycle = query.getCycle(); // ä½¿ç”¨ Assert æŠ›å‡ºå¼‚å¸¸ï¼Œkernelå±‚ä¼šè‡ªåŠ¨å¤„ç†  Assert.state(cycle % 2 != 0, \"å¾ªç¯å‘¨æœŸä¸åº”æ˜¯å¶æ•°\"); return query; }   æ–­è¨€ ç”±äºå†…æ ¸ä¸­å°è£…äº† Response çš„éƒ¨åˆ†ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨é€»è¾‘åˆ¤æ–­å‡ºé”™æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œ å¹¶å°†å¼‚å¸¸çš„ msg ä½œä¸º response çš„ messageï¼Œ åœ¨å¼€å§‹ä»‹ç»æ–­è¨€ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  /** * æ ¡éªŒè®¢å•æ˜¯å¦æœ‰æ•ˆ */ public validateOrder (String orderNo) { if (Strings.isNullOrEmpty(orderNo)) { throw new OrderNotFoundException(\"è®¢å•ä¸ºç©º\"); } Order order = service.lambdaQueryChain() .eq(Order::getNo, orderNo) .one(); if (null == order) { throw new OrderNotFoundException(\"æ‰¾ä¸åˆ°è®¢å•\"); } // ...  }   å¾ˆæ˜¾ç„¶ï¼Œè¿™å°†å­˜åœ¨å¾ˆå¤š if - throw çš„ä»£ç å—ï¼Œå¯¼è‡´æˆ‘ä»¬ä»£ç å¯è¯»æ€§é™ä½ï¼Œ ä¸ºäº†è§£å†³æ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ–­è¨€(Spring è‡ªå¸¦çš„æ–­è¨€åŒ…)ï¼Œ ä¸‹é¢æ˜¯ä½¿ç”¨æ–­è¨€ä¼˜åŒ–åçš„ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13  /** * æ ¡éªŒè®¢å•æ˜¯å¦æœ‰æ•ˆ */ public validateOrder (String orderNo) { Assert.state(Strings.isNullOrEmpty(orderNo), \"è®¢å•ä¸ºç©º\") Order order = service.lambdaQueryChain() .eq(Order::getNo, orderNo) .one(); Assert.notNull(order, \"æ‰¾ä¸åˆ°è®¢å•\") // ... }   æ¥å£å¯¼å‡ºä¸å¼€æ”¾å­—æ®µæ£€ç´¢ æ¥å£å¯¼å‡º å†…æ ¸æä¾›äº†è‡ªåŠ¨æ³¨å†Œ restful api çš„åŠŸèƒ½ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥è¾ƒä¸ºè½»æ¾åœ° å®ç° L2 çº§åˆ«çš„ restful api\n1 2 3 4 5 6 7  /** * äº§å“ Service * @author 4everlynn */ @Export(path = \"products\", create = true) public interface ProductService extends IService\u003cProduct\u003e {s }   æ ¸å¿ƒåœ¨äºï¼Œåœ¨ service å±‚çš„æ¥å£ä¸Šæ·»åŠ æ³¨è§£ @Export, æ­¤æ³¨è§£æœ‰å¤šä¸ªå‚æ•°ï¼Œ å…¶é‡Šä¹‰å¦‚ä¸‹\n   å‚æ•° ç±»å‹ å¤‡æ³¨ Default     path String ç”Ÿæˆæ¥å£çš„åŸºç¡€è·¯å¾„ -   create Boolean å¼€æ”¾ POST æ¥å£(åˆ›å»º) false   update Boolean å¼€æ”¾ PATCH æ¥å£(æ›´æ–°) false   delete Boolean å¼€æ”¾ DELETE æ¥å£(åˆ é™¤) false   page Boolean å¼€æ”¾åˆ†é¡µæŸ¥è¯¢æ¥å£ true   getFromId Boolean å¼€æ”¾å•ä¸ªå¯¹è±¡(æ ¹æ® ID)æŸ¥è¯¢æ¥å£ true    æ³¨è§£æ·»åŠ æˆåŠŸåå¯åŠ¨é¡¹ç›®ï¼Œæ—¥å¿—ä¸­ä¼šæ‰“å°æ³¨å†Œçš„è·¯å¾„\nå¼€æ”¾å­—æ®µæ£€ç´¢ å¼€æ”¾å­—æ®µæ£€ç´¢çš„å…³é”®åœ¨äºä½¿ç”¨ @Public æ³¨è§£ï¼Œæ­¤æ³¨è§£ä¹Ÿæœ‰å¤šä¸ªå‚æ•°ï¼Œ å…¶é‡Šä¹‰å¦‚ä¸‹, é»˜è®¤è¯¥å­—æ®µæ‰€ä»¥çš„æ£€ç´¢æ–¹å¼éƒ½æ˜¯å…³é—­çŠ¶æ€(false)\n   å‚æ•° ç±»å‹ å¤‡æ³¨ Default     eq Boolean æ”¯æŒ field = [any] çš„æŸ¥è¯¢ false   like Boolean æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ false   between Boolean between â€¦ and false   lt Boolean æ”¯æŒ field \u003c [any] çš„æŸ¥è¯¢ false   gt Boolean æ”¯æŒ field \u003e [any] çš„æŸ¥è¯¢ false   le Boolean æ”¯æŒ field \u003c= çš„æŸ¥è¯¢ false   ge Boolean æ”¯æŒ field \u003e= [any] çš„æŸ¥è¯¢ false    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  /** * * @author 4everlynn */ @EqualsAndHashCode(callSuper = true) @TableName(value =\"product\") @Data public class Product extends AncestorDomain implements Serializable { /** * äº§å“åç§° */ @NotNull(message = \"äº§å“åç§°ä¸èƒ½ä¸ºç©º\") @Public(like = true) private String name; }   FAQ å¦‚ä½•ä½¿ä¸»é”®åœ¨è¯·æ±‚ç»“æœä¸­è¿›è¡Œå±•ç¤º ç­”: åœ¨ kernel åŒ…ä¸­æ‰¾åˆ° AncestorDomainï¼Œå»å»é™¤ id å­—æ®µä¸Šæ–¹çš„ @JsonIgnoreæ³¨è§£\nç”Ÿæˆçš„ API æ ¼å¼ä¸è¯·æ±‚è§„èŒƒï¼Ÿ ç­”: åˆ†é¡µè¯·æ±‚: /{BASE_PATH} GET\nåˆ›å»ºè¯·æ±‚: /{BASE_PATH} POST æ›´æ–°è¯·æ±‚: /{BASE_PATH} PATCHï¼ˆbodyä¸­éœ€è¦ä¼ é€’ idï¼‰\nåˆ é™¤è¯·æ±‚: /{BASE_PATH}/{id} DELETE\nå•ä¸ªæŸ¥è¯¢: /{BASE_PATH}/{id} GET\nå¦‚ä½•è¦†ç›–ç”Ÿæˆçš„ API è·¯å¾„ ç­”: å®šä¹‰çš„è·¯å¾„ä¸è‡ªåŠ¨ç”Ÿæˆè®¾å®šçš„è·¯å¾„ä¸€æ¨¡ä¸€æ ·å³å¯\nMaintainer  Edward Jobs   ","description":"","tags":["Spring cli"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/spring-cli/"},{"categories":["work"],"content":" å¯¼è¯»ç›®å½•\n   è´¦å·ä½“ç³»\n  é¡¹ç›®ç®¡ç†\n Issues é‡Œç¨‹ç¢‘    é€šçŸ¥ä¸æ¶ˆæ¯\n é‚®ä»¶é€šçŸ¥ ç«™å†…é€šçŸ¥    æƒé™ä½“ç³»\n ä»“åº“éš”ç¦» ç”¨æˆ·æƒé™ç±»å‹  Guest Reporter Developer Maintainer Owner      æ–‡æ¡£ç®¡ç†\n Wiki Markdown UMLå›¾ æµç¨‹å›¾å¼•æ“(flowã€mermaid)    Devops\n Docker ç§æœ‰ä»“åº“ CI / CD Gitlab Runner    åŸºäºGitçš„åˆ†æ”¯å¼€å‘æ¨¡å‹ (ä»…ä»‹ç»ä¸¤ç§)\n Production / Develop Feature / Release    è¿›é˜¶é˜…è¯»\n Gitlab Hooks Gitlab GraphQL GitLab Pages ä» SVN è¿ç§» Git çš„åŸºæœ¬ä½¿ç”¨    è´¦å·ä½“ç³» graph LR; gitlab(Gitlab) -- group(User Group) up((Account.Core)) -- account(username) up -- avatar up -- nickName up -- pub[public email] up -- com[commit email] up -- password group -- root[Root] -- up group -- admin[Administrator] -- up group -- user[User] -- up   Root \u003e Administrator \u003e User\nå…·ä½“è¯·æŸ¥çœ‹æƒé™éƒ¨åˆ†\n Example. å®ä¾‹åŒ–çš„è´¦å·ä½“ç³» graph LR; gitlab(Gitlab) -- group(åˆæˆé¡¹ç›®ç»„) group -- admin[User - Maintainer - ç»„é•¿] group -- backend[User - åç«¯] group -- js[User - å‰ç«¯] group -- test[User - æµ‹è¯•] group -- ui[User - UI]  é¡¹ç›®ç®¡ç† 1 2 3  åœ¨ Gitlab ä¸­é¡¹ç›®ç®¡ç†ä¸»è¦ä¾æ‰˜äº Issue, äº‹å®ä¸Šï¼Œå¤§å¤šæ•°åŸºäº Git ç ”å‘çš„é¡¹ç›®ç®¡ç†å¹³å°çš†æ˜¯å¦‚æ­¤ æ‰€ä»¥åœ¨è¿™ä¸ªéƒ¨åˆ†é‡Œï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯ç€é‡ä»‹ç» Issue   æˆ‘ä»¬ç»å¸¸åœ¨ GitHub ä¸Šçœ‹åˆ° Issues å¾€å¾€æ˜¯ç½‘å‹å¯¹äºæ¡†æ¶æå‡ºçš„ä¸€äº›å»ºè®®æˆ–è€… BUG ä¿®æ­£ åŒæ ·çš„åœ¨Gitlabä¸Šï¼Œä»–ä»¬çš„åŠŸèƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¸‹é¢å°±å…·ä½“ä»‹ç»ä¸€ä¸‹ã€‚\nIssues Issues æ˜¯åœ¨ GitLab ä¸­å°±æƒ³æ³•å’Œè®¡åˆ’å·¥ä½œè¿›è¡Œåä½œçš„åŸºæœ¬åª’ä»‹ã€‚\næ¦‚è¿° GitLab Issue è·Ÿè¸ªå™¨æ˜¯ä¸€ç§ç”¨äºåä½œå¼€å‘æƒ³æ³•ã€è§£å†³é—®é¢˜å’Œè§„åˆ’å·¥ä½œçš„é«˜çº§å·¥å…·ã€‚ Issue å¯ä»¥å…è®¸åœ¨ææ¡ˆå®æ–½ä¹‹å‰å’Œå®æ–½æœŸé—´åœ¨ä»¥ä¸‹å„æ–¹ä¹‹é—´å…±äº«å’Œè®¨è®ºææ¡ˆï¼š\n ä½ å’Œä½ çš„å›¢é˜Ÿã€‚ å¤–éƒ¨åˆä½œè€…ã€‚  å®ƒä»¬è¿˜å¯ç”¨äºå„ç§å…¶ä»–ç›®çš„ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚å’Œå·¥ä½œæµç¨‹è¿›è¡Œå®šåˆ¶ã€‚ Issue å§‹ç»ˆä¸ç‰¹å®šé¡¹ç›®ç›¸å…³è”ï¼Œä½†å¦‚æœæ‚¨åœ¨ä¸€ä¸ªç»„ä¸­æœ‰å¤šä¸ªé¡¹ç›®ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ç»„çº§åˆ«é›†ä¸­æŸ¥çœ‹æ‰€æœ‰ Issueã€‚ å¸¸è§ç”¨ä¾‹åŒ…æ‹¬ï¼š\n è®¨è®ºæ–°æƒ³æ³•çš„å®æ–½ è·Ÿè¸ªä»»åŠ¡å’Œå·¥ä½œçŠ¶æ€ æ¥å—åŠŸèƒ½å»ºè®®ã€é—®é¢˜ã€æ”¯æŒè¯·æ±‚æˆ–é”™è¯¯æŠ¥å‘Š è¯¦ç»†è¯´æ˜æ–°çš„ä»£ç å®ç°  Issue çš„ç»„æˆ Issue åŒ…å«å„ç§å†…å®¹å’Œå…ƒæ•°æ®ï¼Œä»è€Œåœ¨å¦‚ä½•ä½¿ç”¨å®ƒä»¬æ–¹é¢å…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚\næ¯ä¸ª Issue éƒ½å¯ä»¥åŒ…å«ä»¥ä¸‹å±æ€§ï¼Œä½†å¹¶éæ‰€æœ‰é¡¹ç›®éƒ½å¿…é¡»è®¾ç½®ã€‚\n   åç§° å¤‡æ³¨     Content å†…å®¹   Title æ ‡é¢˜   Description and tasks æè¿°ä¸ä»»åŠ¡   Comments and other activity è¯„è®ºä¸å…¶ä»–è¡Œä¸º   People å‚ä¸çš„äººå‘˜   Author ä½œè€…   Assignee(s) æ‰§è¡Œè€…(è¢«æŒ‡æ´¾è€…)   State (open or closed) çŠ¶æ€(æ‰“å¼€æˆ–è€…å…³é—­)   Confidentiality æœºå¯†æ€§   Milestone å±äºæŸä¸ªé‡Œç¨‹ç¢‘   Due date æˆªæ­¢æ—¥æœŸ   Weight æƒé‡   Labels æ ‡ç­¾(å¦‚Bugã€Featureç­‰)   Votes æŠ•ç¥¨   Reaction emoji emoji è¡¨æƒ…åŒ…   Linked issues é“¾æ¥åˆ°å…¶ä»–çš„issue   Unique issue number and URL å”¯ä¸€çš„ç¼–å·å’ŒURL     æ­¤å¤–, Issue å®Œæ•´æ”¯æŒäº† Markdown è¯­æ³•, åœ¨Issueçš„æè¿°å’Œè¯„è®ºä¸­å¯è‡ªç”±ä½¿ç”¨å¯Œæ–‡æœ¬æˆ–è€… Markdown\n é‡Œç¨‹ç¢‘ 1 2 3 4  GitLab ä¸­çš„é‡Œç¨‹ç¢‘æ˜¯ä¸€ç§è·Ÿè¸ªé—®é¢˜å’Œåˆå¹¶è¯·æ±‚çš„æ–¹æ³•ï¼Œ è¿™äº›è¯·æ±‚æ˜¯ä¸ºäº†åœ¨ç‰¹å®šæ—¶é—´æ®µå†…å®ç°æ›´å¹¿æ³›çš„ç›®æ ‡è€Œåˆ›å»ºçš„ã€‚ é‡Œç¨‹ç¢‘å…è®¸æ‚¨ç»„ç»‡é—®é¢˜å¹¶å°†è¯·æ±‚åˆå¹¶åˆ°ä¸€ä¸ªæœ‰å‡èšåŠ›çš„ç»„ä¸­ï¼Œ å¹¶å…·æœ‰å¯é€‰çš„å¼€å§‹æ—¥æœŸå’Œå¯é€‰çš„æˆªæ­¢æ—¥æœŸã€‚    é‡Œç¨‹ç¢‘çš„æœ¬è´¨æ˜¯ Issues çš„é›†åˆ\n é‡Œç¨‹ç¢‘å¯ä»¥ç”¨ä½œå‘å¸ƒ, è®¾ç½®é‡Œç¨‹ç¢‘åˆ°æœŸæ—¥æœŸä»¥è¡¨ç¤ºæ‚¨çš„ç‰ˆæœ¬çš„å‘å¸ƒæ—¥æœŸï¼Œå¹¶å°†é‡Œç¨‹ç¢‘å¼€å§‹æ—¥æœŸç•™ç©ºã€‚\nå°†é‡Œç¨‹ç¢‘æ ‡é¢˜è®¾ç½®ä¸ºæ‚¨å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚Version 9.4.\né€šè¿‡ä»é—®é¢˜çš„å³ä¾§è¾¹æ ä¸­å…³è”æ‰€éœ€çš„é‡Œç¨‹ç¢‘ï¼Œå°†é—®é¢˜æ·»åŠ åˆ°æ‚¨çš„ç‰ˆæœ¬ä¸­ã€‚\né¡¹ç›®é‡Œç¨‹ç¢‘å’Œå°ç»„é‡Œç¨‹ç¢‘ é¡¹ç›®é‡Œç¨‹ç¢‘åªèƒ½åˆ†é…ç»™è¯¥é¡¹ç›®ä¸­çš„é—®é¢˜æˆ–åˆå¹¶è¯·æ±‚ã€‚\nåœ¨é¡¹ç›®ä¸­çš„ Issues \u003e Milestone ä»¥æŸ¥çœ‹é¡¹ç›®é‡Œç¨‹ç¢‘åˆ—è¡¨ã€‚\nå¯ä»¥å°†ç»„é‡Œç¨‹ç¢‘åˆ†é…ç»™è¯¥ç»„ä¸­ä»»ä½•é¡¹ç›®çš„ä»»ä½•é—®é¢˜æˆ–åˆå¹¶è¯·æ±‚ã€‚\nåœ¨ç»„ä¸­çš„ Issue \u003e Milestone ä»¥æŸ¥çœ‹ç»„é‡Œç¨‹ç¢‘åˆ—è¡¨ã€‚\næ‚¨æœ‰æƒè®¿é—®çš„æ‰€æœ‰é‡Œç¨‹ç¢‘ä¹Ÿå¯ä»¥åœ¨ä»ªè¡¨æ¿é‡Œç¨‹ç¢‘åˆ—è¡¨ä¸­æŸ¥çœ‹ã€‚\nå•å‡»é¡¶éƒ¨å¯¼èˆªæ ä¸Šçš„é‡Œç¨‹ç¢‘ä»¥æŸ¥çœ‹æ‚¨æœ‰æƒè®¿é—®çš„é¡¹ç›®é‡Œç¨‹ç¢‘å’Œç»„é‡Œç¨‹ç¢‘ã€‚\né¡¹ç›®çº§åˆ«é‡Œç¨‹ç¢‘ ç»„çº§åˆ«é‡Œç¨‹ç¢‘ é€šçŸ¥ä¸æ¶ˆæ¯ åœ¨ Gitlab ä¸­å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§é€šçŸ¥æ–¹å¼\n é‚®ä»¶é€šçŸ¥ ç«™å†…é€šçŸ¥  é‚®ä»¶é€šçŸ¥ å¹³å°ä¸­å¯ä»¥é…ç½®é‚®ç®±å‘ä»¶è´¦æˆ·ï¼Œå¹¶å¯é€šè¿‡æ­¤è´¦æˆ·å‘é€é‚®ä»¶ç»™æ‰€æœ‰çš„ç”¨æˆ·, æ­¤å¤„åˆ—ä¸¾å‡ å¤„ç”±ç³»ç»Ÿè§¦å‘çš„é‚®ä»¶é€šçŸ¥ä¸»é¢˜\n ä»£ç å‘ç”Ÿåˆå¹¶ Issue è¢«è¯„è®º è¢«æŒ‡æ´¾åˆ°æŸä¸ª Issue ç›¸å…³çš„ Issue å‘ç”Ÿæ“ä½œ(æ ‡ç­¾å˜æ›´ã€çŠ¶æ€å˜æ›´ç­‰) CI è¿è¡Œå¤±è´¥ åœ¨ Issue ä¸­è¢«æåˆ°  ç«™å†…é€šçŸ¥ ç«™å†…é€šçŸ¥åœ¨ (/dashboard/todos)  ä¸­å¯ä»¥çœ‹åˆ°, å›Šæ‹¬äº†æ‰€æœ‰é‚®ä»¶é€šçŸ¥çš„å†…å®¹, åŒæ—¶ï¼Œåœ¨ Service Worker å¯ç”¨çš„æƒ…å†µä¸‹ï¼ŒGitlab ä¼šé€šè¿‡æµè§ˆå™¨å‘å‡º Native é€šçŸ¥ã€‚\næƒé™ä½“ç³» Gitlab çš„æƒé™æ˜¯å»ºç«‹åœ¨ç»„ä¸ä»“åº“ä¹‹ä¸Šçš„ å…³ç³»ä¸º ç»„ \u003e ä»“åº“ å¦‚æœç”¨æˆ·åœ¨ä¸€ä¸ªç»„å†…è¢«æˆæƒ, åˆ™åœ¨è¯¥ç»„ä¸‹æ‰€æœ‰çš„ä»“åº“éƒ½å¯ä»¥è¿›è¡Œè®¿é—®, å…³ç³»å›¾å¦‚ä¸‹æ‰€ç¤º(ç”±é«˜åˆ°ä½)\ngraph LR; power -- Owner power(æƒé™æ¨¡å‹) -- Maintainer power -- Developer power -- Reporter group(ç»„) -.- sub_group(å­ç»„) -- repo(ä»“åº“) group -.- power sub_group -- power repo -- power  ","description":"","tags":["Git","Gitlab","Work"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/work/gitlab/"},{"categories":null,"content":"The director of fatewa  4everlynn is alias for Edward Jobs, Since 2012, I have been involved in programming, from RGSS to Java, JavaScript, PHP and Golang  Led the fatewa team and participated in many projects, including but not limited to  Unileverâ€™s H5 Page Sinaâ€™s teachers' grand ceremony Page Construction of official websites of several companies Open-Source Software  ","description":"","tags":null,"title":"Fatewa | 4everlynn","uri":"/fatewa/about/"},{"categories":["web"],"content":"  ","description":"","tags":["BIM","AR"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/tech/bim-summary/"},{"categories":["web"],"content":" åœ¨è¿‡å»çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘åœ¨é¡¹ç›®ä¸­å‚ä¸äº†ä¸€éƒ¨åˆ† WebGL çš„åŠŸèƒ½å®ç°ï¼Œä¸»è¦ä½¿ç”¨åˆ°çš„æŠ€æœ¯ä¸º Cesiumã€ThreeJSï¼Œ é—²æš‡ä¹‹ä½™ï¼Œå°±æ‰“ç®—è®°å½•ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¡†æ¶çš„ä½¿ç”¨ï¼Œä»¥åŠä¸ Vue å°è£…ç»“åˆçš„è¿‡ç¨‹ã€‚\n ä»£ç ä»“åº“åœ°å€, å–œæ¬¢è®°å¾—ç»™ä¸ªStarå‘€~\nWhy Three.js éšç€ WebGL é€æ¸æ™®åŠï¼Œé¡ºåº”è€Œç”Ÿçš„æ¡†æ¶ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œåœ¨è¿™å…¶ä¸­TheeJSåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´æ˜¯çŸ¥ååº¦ã€å®Œæˆåº¦æœ€é«˜çš„æ¡†æ¶ï¼Œ\nä¹Ÿæ­£æ˜¯å…¶ä¼˜ç‚¹ä¹‹å¤šä½¿å¾—æˆ‘ä»¬åœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™ï¼Œåšå®šåœ°é€‰æ‹©äº†å®ƒï¼Œè¯è™½å¦‚æ­¤ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯é‡åˆ°äº†ä¸å°‘æ£˜æ‰‹çš„é—®é¢˜ï¼Œ\nåœ¨æ­¤æˆ‘ä¾¿è®°å½•ã€å¤ç›˜ä¸€ä¸‹æ•´ä¸ªå°è£…ã€ä½¿ç”¨çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿è‡ªå·±å°†æ¥è¿›è¡ŒæŸ¥é˜…ï¼Œä¹Ÿä¸ºåæ¥è€…æä¾›ä¸€äº›æ¡ˆä¾‹ã€‚\nVersion \u0026 Tech  Vue ^2.6.11 three ^0.128.0 Typescript ~4.1.5 rxjs ^6.6.7 vue-styled-components ^1.6.0  Project Struct . â”œâ”€â”€ App.vue â”œâ”€â”€ components â”‚Â â””â”€â”€ base â”‚Â â”œâ”€â”€ fatewa-gl â”‚Â â”‚Â â””â”€â”€ index.tsx # å…¥å£ç»„ä»¶ â”‚Â â””â”€â”€ types â”‚Â â””â”€â”€ index.ts # æ¥å£ã€ç±»å‹å®šä¹‰ â”œâ”€â”€ libs â”‚Â â”œâ”€â”€ lib-plugins # å„ç§é»˜è®¤å®ç°çš„æ’ä»¶ â”‚Â â””â”€â”€ lib-utils.ts # å·¥å…·ç®—æ³• â”œâ”€â”€ main.ts â”œâ”€â”€ router â”‚Â â””â”€â”€ index.ts â”œâ”€â”€ shims-tsx.d.ts â”œâ”€â”€ shims-vue.d.ts â”œâ”€â”€ textures # ä¸‰ç»´çº¹ç† â””â”€â”€ views Types ç»è¿‡è®¾è®¡ï¼Œæ¡†æ¶æ•´ä½“é‡‡ç”¨æ’ä»¶åŒ–ç¼–ç¨‹æ–¹å¼, å°†åŠŸèƒ½è§£è€¦ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†æ›´å¼ºçš„ç»´æŠ¤æ€§ã€‚\nå…¶ä¸­ pass å‡½æ•°ä» lib-utils å¼•å…¥\nä»…ä»…åªæ˜¯ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œç”¨äºæ’é™¤ eslint çš„é”™è¯¯\npass å‡½æ•° 1 2 3 4 5 6 7 8  /** * å±€éƒ¨è§„é¿ eslint å£°æ˜æœªå¼•ç”¨çš„å˜é‡è§„åˆ™ * @param args */ // eslint-disable-next-line function pass (args: any) { // passed for eslint }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93  import { Camera, Scene, Renderer } from 'three' import { pass } from '@/libs/lib-utils' /** * æ’ä»¶å®‰è£…å‚æ•° */ interface PluginInstallOptions { /** * åœºæ™¯ */ scene: Scene, /** * æ‘„åƒå¤´ */ camera: Camera, /** * æ¸²æŸ“å™¨ */ renderer: Renderer } /** * æ’ä»¶çš„é’©å­å‡½æ•° */ interface PluginHooks { beforeInstall (options: PluginInstallOptions): void afterInstall (options: PluginInstallOptions): void /** * æ¸²æŸ“å‡½æ•°ï¼Œå°†åœ¨æ•´ä¸ªä¸»å¾ªç¯ä¸­è¿›è¡Œæ¸²æŸ“ * éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€»è¾‘åº”å°½å¯èƒ½åœ°ç®€å•ï¼Œå¦åˆ™ä¼šå½±å“åˆ°æ•´ä½“æ¸²æŸ“çš„å¸§æ•° * @param options */ render (options: PluginInstallOptions): void } /** * æ’ä»¶æ¥å£ */ interface Plugin extends PluginHooks { /** * æ‰€æœ‰çš„æ’ä»¶éœ€è¦å®ç°å®‰è£…æ–¹æ³• * @param options */ install (options: PluginInstallOptions): void } /** * æ’ä»¶é€‚é…å™¨ï¼Œå¯¹äºä¸å…³å¿ƒé’©å­å‡½æ•°çš„æ’ä»¶ * ç›´æ¥ç»§æ‰¿æŠ½è±¡ç±»å³å¯ */ abstract class GLPlugin implements Plugin { /** * é’©å­å‡½æ•°çš„é»˜è®¤å®ç° * @param options */ afterInstall (options: PluginInstallOptions): void { pass(options) } /** * é’©å­å‡½æ•°çš„é»˜è®¤å®ç° * @param options */ beforeInstall (options: PluginInstallOptions): void { pass(options) } abstract install(options: PluginInstallOptions): void /** * é’©å­å‡½æ•°çš„é»˜è®¤å®ç° * @param options */ render (options: PluginInstallOptions): void { pass(options) } } /** * å®ä½“ç±»ï¼Œæš‚æœªå®ç°å‚æ•° */ interface Entity { none: any } /** * ç»„ä»¶çš„ Prop å®šä¹‰ */ interface GL { entities: Entity [], plugins: Plugin [] } export { GL, Entity, Plugin, PluginInstallOptions, GLPlugin }    å¯¹äºè¿™ä¸ªç»“æ„ä¸‹çš„å…·ä½“å®ç°ï¼Œå°†åœ¨åç»­çš„æ–‡ç« ä¸­ä»‹ç»\n ","description":"","tags":["three.js","vue"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/tech/threejs-chapter-1/"},{"categories":["docker"],"content":" ç½‘ç«™ å¯¹äºæ¯ä¸ªäººéƒ½ä¸é™Œç”Ÿï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ä¸å„ç§ä¸åŒçš„ç½‘ç«™è¿›è¡Œäº’åŠ¨ï¼Œéšç€ä¿¡æ¯åŒ–ä¸æ–­å‘å±•ï¼Œå¾ˆå¤šå…¬å¸ä¸ä¸ªäººéƒ½æ‹¥æœ‰äº†è‡ªå·±çš„ç½‘ç«™ï¼Œå¾ˆå¤šæ—¶å€™åšç½‘ç«™çš„å¿µå¤´éƒ½æ­¢æ­¥äºæŠ€æœ¯é™åˆ¶ï¼Œé‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘å°±ä»‹ç»ä¸€ä¸ªè®©å¤§å®¶å¯ä»¥å¾ˆå¿«æ­å»ºèµ·è‡ªå·±ç½‘ç«™çš„æ–¹æ³•ï¼Œå¦‚æœè¿™æ­£æ˜¯æ‚¨æ‰€éœ€çš„å°±ç»§ç»­çœ‹ä¸‹å»å§ï¼\n WordPress æ­£å¦‚ä½ æ‰€è§,ä»Šå¤©è¦ä»‹ç»çš„å°±æ˜¯å¤§åé¼é¼çš„ WordPressï¼Œä½¿ç”¨ WordPress ï¼Œæ‚¨ä»…éœ€è¦ä¸€ç‚¹ç‚¹å¸¸ç”¨çš„è®¡ç®—æœºçŸ¥è¯†å³å¯ï¼Œå¦‚æœæ‚¨å¯¹å®ƒè¿˜ä¸è®¤è¯†ï¼Œé‚£ä¹ˆä»¥ä¸‹æ˜¯ ç»´åŸºç™¾ç§‘ å¯¹äº WordPress çš„ä¸€æ®µæè¿°:\n WordPressæ˜¯ä¸€ä¸ªä»¥PHPå’ŒMySQLä¸ºå¹³å°çš„è‡ªç”±å¼€æºçš„åšå®¢è½¯ä»¶å’Œå†…å®¹ç®¡ç†ç³»ç»Ÿã€‚WordPresså…·æœ‰æ’ä»¶æ¶æ„å’Œæ¨¡æ¿ç³»ç»Ÿã€‚ æˆªè‡³2018å¹´4æœˆï¼Œæ’åå‰1000ä¸‡çš„ç½‘ç«™ä¸­è¶…è¿‡30.6%ä½¿ç”¨WordPressã€‚ WordPressæ˜¯æœ€å—æ¬¢è¿çš„ç½‘ç«™å†…å®¹ç®¡ç†ç³»ç»Ÿã€‚ å…¨çƒæœ‰å¤§çº¦30%çš„ç½‘ç«™(7äº¿5000ä¸ª)éƒ½æ˜¯ä½¿ç”¨WordPressæ¶è®¾ç½‘ç«™çš„ã€‚ WordPressæ˜¯ç›®å‰å› ç‰¹ç½‘ä¸Šæœ€æµè¡Œçš„åšå®¢ç³»ç»Ÿã€‚ WordPressåœ¨æœ€è‘—åçš„ç½‘ç»œå‘å¸ƒé˜¶æ®µä¸­è„±é¢–è€Œå‡ºã€‚ å¦‚ä»Šï¼Œå®ƒè¢«ä½¿ç”¨åœ¨è¶…è¿‡7000ä¸‡ä¸ªç«™ç‚¹ä¸Šã€‚\n æˆ–è®¸ä½ å¯¹äºå…¶ä¸­çš„ä¸€äº›ä¸“ä¸šæœ¯è¯­å¹¶ä¸äº†è§£ï¼Œæ²¡å…³ç³»ï¼åªè¦çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå¾ˆå¯é çš„ç³»ç»Ÿå³å¯ã€‚\nå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº WordPress çš„çŸ¥è¯†ï¼Œå¯ä»¥è®¿é—® Wordpress ä¸­æ–‡å®˜ç½‘\næ€ä¹ˆåš ï¼Ÿ è™½ç„¶ Wordpress å¤šä»¥å®‰è£…ç®€ä¾¿è‘—ç§°ï¼Œä½†ä½œä¸ºæ²¡æœ‰ä»»ä½•ç›¸å…³çŸ¥è¯†çš„ç¾¤ä½“ï¼Œæƒ³è¦æˆåŠŸå®‰è£…ä»ç„¶å…·æœ‰ä¸€å®šéš¾åº¦ï¼ŒæŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œæ­å»ºPHPçš„è¿è¡Œç¯å¢ƒå°±æ˜¯åŸºç¡€ï¼Œè¿™ä¸€æ­¥å¯èƒ½å°±ä¼šåŠé€€å¾ˆå¤§ä¸€éƒ¨åˆ†äººï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘è¦ä»‹ç»çš„å°±æ˜¯ä½¿ç”¨ Docker è¿›è¡Œå®‰è£…çš„æ–¹å¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œåªéœ€è¦æœ‰ä¸€å° Linux çš„ä¸»æœºå³å¯(éœ€è¦æ”¯æŒDockerè¿è¡Œ)\nå…³äº Docker åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä¸å¯¹ Docker è¿›è¡Œè¿‡å¤šçš„ä»‹ç»ï¼Œåç»­çš„ç¯‡ç« ä¸­æˆ‘ä¼šé€æ­¥åœ°ä»‹ç»è¿™ä¸ªæœåŠ¡å®¹å™¨åŒ–æ—¶ä»£è¶…çº§ğŸ”¥çš„å¼€æºå·¥å…·ï¼Œé‚£ä¹ˆè‡³å°‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œåªéœ€è¦èƒ½å¤Ÿå®‰è£…å¹¶ç®€å•ä½¿ç”¨å³å¯\nå®‰è£… Docker åœ¨ CentOS 7 å®‰è£…dockerè¦æ±‚ç³»ç»Ÿä¸º64ä½ã€ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¸º 3.10 ä»¥ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰æœºå™¨çš„ç‰ˆæœ¬\n1  uname -r   è¿è¡Œç»“æœå‚è€ƒ\n1 2 3  [root@disware ~]# uname -r 3.10.0-693.5.2.el7.x86_64 [root@disware ~]#    å®‰è£…å®Œæˆåå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯\n1  docker -v   è¿è¡Œç»“æœå‚è€ƒ\n1 2  [root@disware ~]# docker -v Docker version 18.09.5, build e8ff056   å®‰è£…å®Œæˆï¼Œæˆ‘ä»¬æ¥ç€å®‰è£… docker-composeï¼Œç”±äºè¿™ä¸ªåœ¨å›½å†…å®‰è£…æ¯”è¾ƒæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™é‡Œæä¾›çš„åŠ é€ŸæœåŠ¡è¿›è¡Œå®‰è£…\nä»¥ä¸‹æ˜¯å®‰è£… docker-compose çš„å‘½ä»¤\n1 2  curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` \u003e /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose   å®‰è£…å®Œæˆåï¼ŒåŒæ ·åœ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯\n1  docker-compose -v   è¿è¡Œç»“æœå‚è€ƒ\n1 2  [root@disware ~]# docker-compose -v docker-compose version 1.25.4, build 8d51620a   åˆ›å»ºæœåŠ¡æ–‡ä»¶å¤¹ åœ¨æ­¤å¤„æˆ‘ä»¥ /opt/wordpress è¿™ä¸ªæ–‡ä»¶å¤¹ä¸ºä¾‹\n1  mkdir /opt/wordpress \u0026\u0026 cd /opt/wordpress   ç¼–å†™ .env æ–‡ä»¶ è¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯é…ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£æˆç±»ä¼¼äºæŸä¸ªè½¯ä»¶çš„é…ç½®é¡¹, åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œ\n1  vi .env   æ¥ç€å°†ä»¥ä¸‹å†…å®¹è¾“å…¥åˆ°å…¶ä¸­\n1 2 3 4 5 6 7 8  # æ•°æ®åº“åç§° DB_NAME=my_website # æ•°æ®åº“ ç”¨æˆ·å DB_USER=root # æ•°æ®åº“ å¯†ç  DB_PASSWORD=root123 # æ•°æ®åº“ HOSTåç§° HOST_MYSQL=mysql   æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç´§æ¥ç€è¿›è¡Œç¼–å†™ docker-compose.yml (æœåŠ¡ç»“æ„çš„æè¿°æ–‡ä»¶)\n1  vi docker-compose.yml   è¾“å…¥å†…å®¹å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  version:'3'services:wordpress:image:wordpresshostname:wordpressports:- \"9812:80\"environment:DB_HOST:${HOST_MYSQL}DB_NAME:${DB_NAME}DB_USER:${DB_USER}DB_PASSWORD:${DB_PASSWORD}volumes:- ./data/wordpress/root:/var/www/html- ./logs/php/:/var/log/php/:rwdepends_on:- mysqlmysql:image:mysql:5.7hostname:${HOST_MYSQL}volumes:- ./data/mysql:/var/lib/mysql- ./my.cnf:/etc/my.cnfrestart:alwaysenvironment:MYSQL_ROOT_PASSWORD:${DB_PASSWORD}  ç„¶åï¼Œç”±äºæˆ‘ä»¬çš„ç½‘ç«™ä¸­ä¼šæœ‰ä¸€äº›ä¸­æ–‡å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®åº“çš„å­—ç¬¦é›†è¿›è¡Œä¸€ä¸ªé…ç½®, åœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œ\n1  vi my.cnf   è¾“å…¥å†…å®¹å¦‚ä¸‹\n[mysqld] user=mysql default-storage-engine=INNODB character-set-server=utf8 [client] default-character-set=utf8 [mysql] default-character-set=utf8 å¯åŠ¨æœåŠ¡ å¦‚æœä½ é¡ºåˆ©äº†è¿›è¡Œä»¥ä¸Šçš„å…¨éƒ¨æ­¥éª¤ï¼Œæ­å–œï¼æˆ‘ä»¬å¯ä»¥å¯åŠ¨è‡ªå·±çš„ç½‘ç«™äº†ï¼\nåœ¨å½“å‰ç›®å½•ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯ä»¥åå°çš„å½¢å¼å¯åŠ¨åº”ç”¨\n1  docker-compose up -d   å¦‚æœåœ¨ç»ˆç«¯ä¸­ï¼Œä½ çœ‹åˆ°äº†ä»¥ä¸‹è¾“å‡ºï¼Œé‚£ä¹ˆåº”ç”¨æ­£å¼å¯åŠ¨äº†\n1 2 3 4  [root@disware wordpress]# docker-compose up -d Creating network \"wordpress_default\" with the default driver Creating wordpress_mysql_1 ... done Creating wordpress_wordpress_1 ... done   åœ¨æ­£å¼å®‰è£…ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°æ®åº“\n1 2 3 4 5 6  docker exec -ti wordpress_mysql_1 mysql -u root -proot123 create database `my_website`; exit    åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost(æˆ–è€… Linux IP):9812 å³å¯çœ‹åˆ°å®‰è£…ç•Œé¢\n é€‰æ‹©å®Œè¯­è¨€åï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·ä¸€ä¸ªè¡¨å•, æŒ‰ç…§ä»¥ä¸‹å†…å®¹å¡«å†™å³å¯\n   åç§° å†…å®¹     æ•°æ®åº“å my_website   ç”¨æˆ·å root   å¯†ç  root123   æ•°æ®åº“ä¸»æœº mysql   è¡¨å‰ç¼€ wp_    åˆ°æ­¤ï¼Œ Wordpress å°±å®‰è£…å®Œæˆäº†ï¼Œåç»­å¡«å†™ç”¨æˆ·åã€å¯†ç ï¼Œç™»é™†å³å¯\n","description":"","tags":["docker","wordpress","docker-compose"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/docker/wordpress/"},{"categories":["docker"],"content":"å‰è¨€ æŠ€æœ¯åœˆçš„å‘å±•ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ç¬æ¯ä¸‡å˜ï¼Œä»å»å¹´å¼€å§‹ 5G æŠ€æœ¯é€æ¸è½åœ°å•†ç”¨ï¼Œäººå·¥æ™ºèƒ½ä¹Ÿæ…¢æ…¢åœ°æˆç†Ÿï¼Œå°±å‘å±•è€Œè¨€è¿™å‡ å¹´çš„é€Ÿåº¦å¯ä»¥è¯´æ˜¯è¾¾åˆ°äº†ä¸€ä¸ªéå¸¸ææ€–çš„åœ°æ­¥ï¼Œåœ¨è¿ç»´é¢†åŸŸï¼ŒæŠ€æœ¯ä¹Ÿæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„ docker å°±æ˜¯è¿™äº›å¹´åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å·²ç»å¹¿æ³›è¢«åº”ç”¨çš„ä¸€é—¨æŠ€æœ¯ã€‚\nä»¥ä¸‹æ˜¯ç™¾åº¦ç™¾ç§‘ä¸­å¯¹äº docker çš„ä¸€æ®µä»‹ç»\n Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨æˆ–Windows æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚\n ä»€ä¹ˆæ˜¯å®¹å™¨ å®¹å™¨ ä¸ è™šæ‹Ÿæœº éå¸¸æ¥è¿‘ï¼Œå´åˆä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œç›¸è¾ƒäºè™šæ‹Ÿæœºæ²‰é‡çš„æ¶æ„ï¼Œå®¹å™¨å¯ä»¥è¯´æ˜¯æ‹¥æœ‰éå¸¸è‹—æ¡çš„ â€˜èº«æâ€™ï¼Œå®ƒå¯ä»¥åœ¨å‡ ç§’å†…å¯åŠ¨ï¼Œå¹¶èƒ½ä¸å®¿ä¸»æœºç›´æ¥è¿›è¡Œé€šè®¯ï¼Œä¸è™šæ‹Ÿæœºä¸åŒçš„æ˜¯ï¼Œå®¹å™¨æ‰€èƒ½åšåˆ°çš„éš”ç¦»ï¼Œé€šå¸¸æ˜¯è¿›ç¨‹çº§åˆ«çš„ï¼Œåœ¨èµ„æºä¸Šå®ƒæ˜¯ä¸å®¿ä¸»æœºå…±äº«çš„ï¼Œä¸¥æ ¼æ¥è¯´å®¹å™¨å¹¶ä¸æ˜¯çœŸæ­£çš„è™šæ‹ŸåŒ–ã€‚ä½œä¸ºå¼€å‘ã€è¿ç»´æ—¶ä½¿ç”¨ï¼Œæˆ‘ä»¬çš„æ¯ä¸€ä¸ªæœåŠ¡ã€åº”ç”¨éƒ½å¯¹åº”ä¸€ä¸ªå®¹å™¨ï¼Œä½œä¸ºåº”ç”¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®¹å™¨å†…éƒ¨ä¸€èˆ¬ä¼šè£…è½½busyboxã€alpineç­‰éå¸¸è½»é‡çš„æ“ä½œç³»ç»Ÿã€‚\nå®‰è£… docker (ä»¥ CentOS 7 ä¸ºä¾‹) å®‰è£… yum æº åœ¨ç»ˆç«¯ä¸­è¾“å…¥\n1  curl -f sSL https://get.docker.com/ | sh -s -- --mirror AzureChinaCloud   æ›´æ–° yum ç¼“å­˜ 1  yum makecache fast   å®‰è£…æœ€æ–°ç‰ˆ docker 1  yum -y install docker-engine   å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ£€éªŒ\n1  docker -v   docker æ”¯æŒçš„å‘½ä»¤ ï¼ˆåˆ—ä¸¾å¸¸ç”¨ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  Commands: build Build an image from a Dockerfile commit Create a new image from a container's changes exec Run a command in a running container images List images logs Fetch the logs of a container ps List containers pull Pull an image or a repository from a registry push Push an image or a repository to a registry restart Restart one or more containers rm Remove one or more containers rmi Remove one or more images run Run a command in a new container start Start one or more stopped containers stop Stop one or more running containers tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE top Display the running processes of a container version Show the Docker version information   Hello World æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä»¥ Hello World,ä½œä¸ºæŠ€æœ¯å…¥é—¨çš„æ¡ˆä¾‹, æˆ‘ä»¬ä½¿ç”¨ pull å‘½ä»¤ï¼Œæ‹‰å– docker-hub å®˜æ–¹ä»“åº“ä¸­çš„ hello-world é•œåƒ\n1  docker pull hello-world   ç„¶å è¾“å…¥\n1  docker run hello-world   æ­¤æ—¶ç»ˆç«¯ä¼šè¾“å‡ºä¸‹é¢è¿™æ®µè‹±æ–‡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  Hello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started/   è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº† docker æœ€åŸºç¡€çš„åº”ç”¨\né…ç½®é•œåƒä»“åº“ åœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å›½å†…é•œåƒè¿›è¡ŒåŠ é€Ÿ(docker-hub æ‹‰å–å¤§é•œåƒéå¸¸æ…¢)ï¼Œæ‰€ä»¥åœ¨æ­¤å¤„æˆ‘ä»¬ç»§ç»­è¿›è¡Œé•œåƒé…ç½®ã€‚\n1  vi /etc/docker/daemon.json   è¾“å…¥ä»¥ä¸‹å†…å®¹\n1 2 3 4 5 6 7 8  { \"registry-mirrors\": [ \"https://1nj0zren.mirror.aliyuncs.com\", \"https://docker.mirrors.ustc.edu.cn\", \"http://f1361db2.m.daocloud.io\", \"https://registry.docker-cn.com\" ] }   æ¥ç€ï¼Œæˆ‘ä»¬é‡å¯ docker æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ\n1  systemctl restart docker   ","description":"","tags":["docker"],"title":"Fatewa | 4everlynn","uri":"/fatewa/posts/docker/docker/"}]
